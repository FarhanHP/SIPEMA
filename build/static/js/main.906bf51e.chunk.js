(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{85:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),c=a.n(r),l=a(10),i=a.n(l),s=a(118),o=a(119),j=a(121),u=a(15),d=a(13),b=a(7),h=a(87),O=a(120),x=a(116),p=a(19),m=function(e){return e.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},g="https://sipema.herokuapp.com/",f="sipema.herokuapp.com",k=a(45),y=a.n(k),v=a(53),w=function(){var e=Object(v.a)(y.a.mark((function e(t,a,n,r,c){var l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:a,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:n,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r),signal:c}).catch((function(e){console.warn("Fetch 1 error: ".concat(e.message))}));case 2:return l=e.sent,e.abrupt("return",l);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),S=a(122),R=a(115);function T(e){var t=e.severity,a=e.title,r=e.body;return Object(n.jsxs)(S.a,{severity:t,children:[Object(n.jsx)(R.a,{children:a}),r]})}var E=function(){return window.localStorage.getItem("login_token")};function P(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],l=t[1],i=Object(r.useState)(null),s=Object(b.a)(i,2),o=s[0],d=s[1],f=Object(r.useState)(!1),k=Object(b.a)(f,2),y=k[0],v=k[1],S=Object(r.useState)(null),R=Object(b.a)(S,2),E=R[0],P=R[1],M=c.a.createRef(),A=c.a.createRef(),B=function(){var e=M.current.value,t=A.current.value;P(null),l(null),d(null),e.length<=0?l("Tidak boleh kosong"):m(e)?t.length<=0?d("Tidak boleh kosong"):(v(!0),function(e,t){return w("".concat(g,"b/user/login"),"POST",{"Content-Type":"application/json"},{email:e,password:t})}(e,t).then((function(e){500===e.status?(P("Terjadi masalah, mohon coba lagi nanti."),v(!1)):e.status>=400?(P("Email atau password salah."),v(!1)):e.json().then((function(e){var t;t=e.token,window.localStorage.setItem("login_token",t),window.location.href="/"}))}))):l("Email tidak berlaku")};return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{children:Object(n.jsx)("title",{children:"Login SIPEMA"})}),Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",width:"320px",p:"10px",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:"SIPEMA"}),Object(n.jsx)(h.a,{align:"center",gutterBottom:!0,children:"Sistem Informasi Pengajian Musholla Al-Ikhlas"}),E?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"error",title:"Login Error",body:E})}):null,Object(n.jsx)(j.a,{my:"40px",children:Object(n.jsx)(O.a,{fullWidth:!0,label:"Email",placeholder:"Masukan email anda...",inputRef:M,error:a,helperText:a,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),B())}})}),Object(n.jsx)(j.a,{my:"40px",children:Object(n.jsx)(O.a,{fullWidth:!0,label:"Password",type:"password",placeholder:"Masukan password anda...",inputRef:A,error:o,helperText:o,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),B())}})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(x.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:y,onClick:B,children:y?"MENCOBA MASUK...":"MASUK"})}),Object(n.jsx)(h.a,{gutterBottom:!0,variant:"body1",align:"center",children:Object(n.jsx)(u.b,{to:"/password/reset",children:"Lupa Password"})}),Object(n.jsxs)(h.a,{gutterBottom:!0,variant:"body1",align:"center",children:["Belum punya akun ? ",Object(n.jsx)(u.b,{to:"/register",children:"Daftar"})]})]})})]})}function M(){return Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:"ERROR 404: Halaman yang kamu cari tidak ditemukan :("}),Object(n.jsx)(h.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(n.jsx)(u.b,{href:"/",children:f})})]})})}function A(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],l=t[1],i=Object(r.useState)(null),s=Object(b.a)(i,2),o=s[0],d=s[1],f=Object(r.useState)(null),k=Object(b.a)(f,2),y=k[0],v=k[1],S=Object(r.useState)(null),R=Object(b.a)(S,2),E=R[0],P=R[1],M=Object(r.useState)(!1),A=Object(b.a)(M,2),B=A[0],I=A[1],U=Object(r.useState)(null),C=Object(b.a)(U,2),D=C[0],G=C[1],W=Object(r.useState)(null),H=Object(b.a)(W,2),L=H[0],N=H[1],K=c.a.createRef(),F=c.a.createRef(),_=c.a.createRef(),J=c.a.createRef(),q=function(){var e=K.current.value,t=F.current.value,a=_.current.value,n=J.current.value;l(null),d(null),v(null),P(null),G(null),N(null),e.length<=0?l("Tidak boleh kosong"):m(e)?t.length<=0?d("Tidak boleh kosong"):a.length<8?v("Password tidak boleh kurang dari 8 karakter"):a!==n?(P("Harus sama"),v("Harus sama")):(I(!0),function(e,t,a){return w("".concat(g,"b/user/register/request"),"POST",{"Content-Type":"application/json"},{email:e,fullname:t,password:a})}(e,t,a).then((function(e){500===e.status?N("Terjadi masalah, mohon coba lagi nanti."):409===e.status?l("Email sudah dipakai"):G("Silakan cek email anda untuk verifikasi"),I(!1)}))):l("Email tidak berlaku")};return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{children:Object(n.jsx)("title",{children:"Daftar SIPEMA"})}),Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",width:"320px",p:"10px",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:"SIPEMA"}),Object(n.jsx)(h.a,{align:"center",gutterBottom:!0,children:"Sistem Informasi Pengajian Musholla Al-Ikhlas"}),D?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"success",title:"Berhasil Mendaftar",body:D})}):L?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"error",title:"Gagal Mendaftar",body:L})}):null,Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{label:"Email",placeholder:"Masukan email anda...",fullWidth:!0,inputRef:K,error:a,helperText:a,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),q())}})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{label:"Nama lengkap",placeholder:"Masukan nama lengkap anda...",fullWidth:!0,inputRef:F,error:o,helperText:o,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),q())}})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{label:"Password",type:"password",placeholder:"Masukan password anda...",fullWidth:!0,inputRef:_,error:y,helperText:y,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),q())}})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{label:"Ulangi password",placeholder:"Ulangi password anda...",fullWidth:!0,inputRef:J,error:E,type:"password",helperText:E,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),q())}})}),Object(n.jsx)(j.a,{mt:"40px",children:Object(n.jsx)(x.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:B,onClick:q,children:B?"MENDAFTAR...":"DAFTAR"})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsxs)(h.a,{align:"center",children:["Sudah punya akun ? ",Object(n.jsx)(u.b,{to:"/login",children:"Login"})]})})]})})]})}var B=a(114),I=a(123);function U(){var e=Object(r.useState)(null),t=Object(b.a)(e,2),a=t[0],l=t[1],i=Object(r.useState)(!1),s=Object(b.a)(i,2),o=s[0],d=s[1],f=Object(r.useState)(null),k=Object(b.a)(f,2),y=k[0],v=k[1],S=Object(r.useState)(null),R=Object(b.a)(S,2),E=R[0],P=R[1],M=c.a.createRef(),A=function(){l(null),v(null),P(null);var e=M.current.value;e.length<=0?l("Tidak boleh kosong"):m(e)?(d(!0),function(e){return w("".concat(g,"b/user/password/reset"),"POST",{"Content-Type":"application/json"},{email:e})}(e).then((function(e){500===e.status?v("Terjadi masalah, mohon coba lagi nanti."):404===e.status?v("Email tidak terdaftar."):P("Silakan cek email anda. Jika tidak ada, coba cek folder spam."),d(!1)}))):l("Email tidak berlaku")};return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{children:Object(n.jsx)("title",{children:"Lupa Password SIPEMA"})}),Object(n.jsxs)(j.a,{display:"flex",minHeight:"100vh",width:"100%",flexDirection:"column",children:[Object(n.jsx)(j.a,{p:{xs:"0",sm:"10px"},children:Object(n.jsx)(B.a,{component:u.b,to:"/login",children:Object(n.jsx)(I.a,{})})}),Object(n.jsxs)(j.a,{margin:"auto",width:"320px",p:"10px",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Lupa Password Akun SIPEMA"}),Object(n.jsx)(h.a,{align:"center",gutterBottom:!0,children:"Anda akan dikirimi email yang berisi tautan untuk mengganti password anda."}),E?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"success",title:"Permintaan reset password berhasil",body:E})}):y?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"error",title:"Permintaan reset password gagal",body:y})}):null,Object(n.jsx)(j.a,{my:"40px",children:Object(n.jsx)(O.a,{label:"Email",placeholder:"Masukan email anda...",fullWidth:!0,inputRef:M,error:a,helperText:a,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),A())}})}),Object(n.jsx)(j.a,{display:"flex",flexDirection:"row-reverse",children:Object(n.jsx)(x.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:o,onClick:A,children:o?"MERESET PASSWORD...":"RESET PASSWORD"})})]})]})]})}var C=a(117);function D(){return Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsx)(j.a,{margin:"auto",children:Object(n.jsx)(C.a,{number:100})})})}function G(){var e=Object(d.g)().token,t=Object(r.useState)(null),a=Object(b.a)(t,2),c=a[0],l=a[1],i=Object(r.useState)(!0),s=Object(b.a)(i,2),o=s[0],u=s[1];return Object(r.useEffect)((function(){u(!0),function(e){return w("".concat(g,"b/user/register/token/").concat(e),"PUT")}(e).then((function(e){500===e.status?l("ERROR 500: Terjadi masalah, mohon coba lagi nanti."):401===e.status?l("ERROR 401: Token sudah kadaluarsa."):403===e.status&&l("ERROR 403: Token tidak berlaku."),u(!1)}))}),[e]),o?Object(n.jsx)(D,{}):c?Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:c}),Object(n.jsx)(h.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(n.jsx)("a",{href:"/",children:f})})]})}):Object(n.jsx)("p",{children:"Success"})}function W(){var e=Object(d.g)().token,t=Object(r.useState)(!0),a=Object(b.a)(t,2),l=a[0],i=a[1],s=Object(r.useState)(null),o=Object(b.a)(s,2),m=o[0],k=o[1],y=Object(r.useState)(!1),v=Object(b.a)(y,2),S=v[0],R=v[1],E=Object(r.useState)(null),P=Object(b.a)(E,2),M=P[0],A=P[1],B=Object(r.useState)(null),I=Object(b.a)(B,2),U=I[0],C=I[1],G=Object(r.useState)(null),W=Object(b.a)(G,2),H=W[0],L=W[1],N=Object(r.useState)(null),K=Object(b.a)(N,2),F=K[0],_=K[1],J=c.a.createRef(),q=c.a.createRef();Object(r.useEffect)((function(){i(!0),function(e){return w("".concat(g,"b/user/password/reset/check/token/").concat(e),"GET")}(e).then((function(e){500===e.status?k("ERROR 500: Terjadi masalah, mohon coba lagi nanti."):401===e.status?k("ERROR 401: Token kadaluarsa."):404===e.status&&k("ERROR 404: Token tidak valid."),i(!1)}))}),[e]);var $=function(){L(null),_(null),A(null),C(null);var t=J.current.value,a=q.current.value;t.length<8?A("Panjang password tidak boleh kurang dari 8 karakter"):t!==a?(A("Harus sama"),C("Harus sama")):(R(!0),function(e,t){return w("".concat(g,"b/user/password/reset/token/").concat(e),"PUT",{"Content-Type":"application/json"},{password:t})}(e,t).then((function(e){500===e.status?_("Terjadi masalah, mohon coba lagin nanti."):404===e.status?_("Token tidak valid."):401===e.status?_("Token telah kadaluarsa."):L(Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(h.a,{gutterBottom:!0,children:"Silakan login dengan password baru anda."}),Object(n.jsx)(j.a,{display:"flex",children:Object(n.jsx)(j.a,{margin:"auto",children:Object(n.jsx)(x.a,{color:"primary",component:u.b,to:"/login",children:"LOGIN"})})})]})),R(!1)})))};return l?Object(n.jsx)(D,{}):m?Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",p:"10px",children:[Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:m}),Object(n.jsx)(h.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(n.jsx)(u.b,{to:"/",children:f})})]})}):Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{children:Object(n.jsx)("title",{children:"Ganti Password SIPEMA"})}),Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",p:"10px",width:"320px",children:[Object(n.jsx)(h.a,{align:"center",variant:"h5",gutterBottom:!0,children:"Ganti Password Akun SIPEMA"}),H?Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(T,{severity:"success",title:"Berhasil Mengganti Password",body:H})}):F?Object(n.jsx)(T,{severity:"error",title:"Gagal Mengganti Password",body:F}):null,Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{type:"password",fullWidth:!0,label:"Password Baru",placeholder:"Masukan password baru anda...",error:M,helperText:M,inputRef:J,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),$())}})}),Object(n.jsx)(j.a,{my:"20px",children:Object(n.jsx)(O.a,{type:"password",fullWidth:!0,label:"Ulangi Password",placeholder:"Ulangi password baru anda...",error:U,helperText:U,inputRef:q,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),$())}})}),Object(n.jsx)(j.a,{my:"40px",children:Object(n.jsx)(x.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:S,onClick:$,children:S?"MENGGANTI PASSWORD...":"GANTI PASSWORD"})})]})})]})}var H=a(31);function L(){var e=E(),t=Object(H.c)((function(e){return e.loginUser})),a=Object(r.useState)(!1),c=Object(b.a)(a,2),l=c[0],i=c[1];return Object(n.jsx)(j.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(n.jsxs)(j.a,{margin:"auto",width:"320px",children:[Object(n.jsx)(h.a,{gutterBottom:!0,align:"center",children:"Selamat datang di SIPEMA"}),Object(n.jsx)(j.a,{mb:"30px"}),Object(n.jsx)(h.a,{variant:"h5",align:"center",gutterBottom:!0,children:t.fullname}),Object(n.jsx)(j.a,{mb:"30px"}),Object(n.jsx)(h.a,{gutterBottom:!0,align:"center",children:"Pendaftaran Anda belum disetujui, silakan hubungi guru anda."}),Object(n.jsx)(j.a,{mb:"40px"}),Object(n.jsx)(j.a,{my:"40px",display:"flex",children:Object(n.jsx)(j.a,{margin:"auto",children:Object(n.jsx)(x.a,{color:"primary",disabled:l,onClick:function(){i(!0),function(e){return w("".concat(g,"b/user/logout"),"DELETE",{token:e})}(e).then((function(e){e.ok&&(window.localStorage.removeItem("login_token"),window.location.href="/login"),i(!1)}))},children:l?"LOGGING OUT...":"LOG OUT"})})})]})})}function N(){var e=Object(d.f)(),t=Object(H.b)(),a=Object(H.c)((function(e){return e.loginUser})),l=Object(r.useState)(!0),i=Object(b.a)(l,2),s=i[0],o=i[1];if(Object(r.useEffect)((function(){if(null===a){var n=E();null===n?e.push("/login"):(o(!0),function(e){return w("".concat(g,"b/user/profile"),"GET",{token:e})}(n).then((function(a){a.ok?a.json().then((function(e){t(function(e){return{type:"LOG_IN",payload:e}}(e)),o(!1)})):e.push("/login")})))}}),[a,t,e]),s)return Object(n.jsx)(D,{});var j=null;return"student"===a.role&&(a.approved||(j=Object(n.jsx)(d.a,{path:"/",children:Object(n.jsx)(L,{})}))),Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(p.a,{children:Object(n.jsx)("title",{children:"SIPEMA"})}),Object(n.jsx)(d.c,{children:j})]})}var K=Object(s.a)((function(){return{root:{backgroundColor:"white"}}}));var F=function(){var e=K();return Object(n.jsxs)(c.a.Fragment,{children:[Object(n.jsx)(o.a,{}),Object(n.jsx)(j.a,{className:e.root,children:Object(n.jsx)(u.a,{children:Object(n.jsxs)(d.c,{children:[Object(n.jsx)(d.a,{path:"/login",children:Object(n.jsx)(P,{})}),Object(n.jsx)(d.a,{path:"/register/token/:token",children:Object(n.jsx)(G,{})}),Object(n.jsx)(d.a,{path:"/register",children:Object(n.jsx)(A,{})}),Object(n.jsx)(d.a,{path:"/password/reset/token/:token",children:Object(n.jsx)(W,{})}),Object(n.jsx)(d.a,{path:"/password/reset",children:Object(n.jsx)(U,{})}),Object(n.jsx)(d.a,{path:"/",children:Object(n.jsx)(N,{})}),Object(n.jsx)(d.a,{path:"*",children:Object(n.jsx)(M,{})})]})})})]})},_=a(32),J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.payload;case"LOG_OUT":return null;default:return e}},q=Object(_.b)({loginUser:J}),$=Object(_.c)(q);i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(H.a,{store:$,children:Object(n.jsx)(F,{})})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.906bf51e.chunk.js.map