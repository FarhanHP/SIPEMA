(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{170:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),r=n.n(c),i=n(21),l=n.n(i),s=n(132),o=n(267),j=n(268),u=n(12),b=n(27),d=n(5),h=n(269),O=n(80),x=n(275),p=n(226),m=n(28),f=n(42),g=function(e){return e.match(/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g)},v=function(e){var t,n=e.split("\n"),c=[],r=Object(f.a)(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;c.push(i),c.push(Object(a.jsx)("br",{}))}}catch(l){r.e(l)}finally{r.f()}return c.pop(),c},y=function(e){for(var t=String(e),n=[],a=0,c=t.length;c>=0;c--)n.splice(0,0,t.charAt(c)),0!==a&&a%3===0&&0!==c&&n.splice(0,0,"."),a++;return n.join("")},k="https://sipema.herokuapp.com/",w="sipema.herokuapp.com",S=n(10),T=n.n(S),C=n(18),A=function(){var e=Object(C.a)(T.a.mark((function e(t,n,a,c,r){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E(t,n,a,JSON.stringify(c),r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(C.a)(T.a.mark((function e(t,n,a,c,r){var i;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:n,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer",body:c,signal:r}).catch((function(e){console.warn("Fetch 1 error: ".concat(e.message))}));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r){return e.apply(this,arguments)}}(),P=function(e){return E("".concat(k,"b/user/logout"),"DELETE",{token:e})},N=n(271),B=n(220);function R(e){var t=e.severity,n=e.title,c=e.body;return Object(a.jsxs)(N.a,{severity:t,children:[Object(a.jsx)(B.a,{children:n}),c]})}var M=function(){return window.localStorage.getItem("login_token")},I=function(e){window.localStorage.setItem("login_token",e)},U=function(){window.localStorage.removeItem("login_token")};function D(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)(null),s=Object(d.a)(l,2),o=s[0],j=s[1],b=Object(c.useState)(!1),f=Object(d.a)(b,2),v=f[0],y=f[1],w=Object(c.useState)(null),S=Object(d.a)(w,2),T=S[0],C=S[1],E=r.a.createRef(),P=r.a.createRef(),N=function(){var e=E.current.value,t=P.current.value;C(null),i(null),j(null),e.length<=0?i("Tidak boleh kosong"):g(e)?t.length<=0?j("Tidak boleh kosong"):(y(!0),function(e,t){return A("".concat(k,"b/user/login"),"POST",{"Content-Type":"application/json"},{email:e,password:t})}(e,t).then((function(e){500===e.status?(C("Terjadi masalah, mohon coba lagi nanti."),y(!1)):e.status>=400?(C("Email atau password salah."),y(!1)):e.json().then((function(e){I(e.token),window.location.href="/"}))}))):i("Email tidak berlaku")};return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Login SIPEMA"})}),Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",width:"320px",p:"10px",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:"SIPEMA"}),Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:"Sistem Informasi Pengajian Musholla Al-Ikhlas"}),T?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"error",title:"Login Error",body:T})}):null,Object(a.jsx)(h.a,{my:"40px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Email",placeholder:"Masukan email anda...",inputRef:E,error:n,helperText:n,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),N())}})}),Object(a.jsx)(h.a,{my:"40px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Password",type:"password",placeholder:"Masukan password anda...",inputRef:P,error:o,helperText:o,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),N())}})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:v,onClick:N,children:v?"MENCOBA MASUK...":"MASUK"})}),Object(a.jsx)(O.a,{gutterBottom:!0,variant:"body1",align:"center",children:Object(a.jsx)(u.b,{to:"/password/reset",children:"Lupa Password"})}),Object(a.jsxs)(O.a,{gutterBottom:!0,variant:"body1",align:"center",children:["Belum punya akun ? ",Object(a.jsx)(u.b,{to:"/register",children:"Daftar"})]})]})})]})}function _(){return Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:"ERROR 404: Halaman yang kamu cari tidak ditemukan :("}),Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(a.jsx)(u.b,{href:"/",children:w})})]})})}function F(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)(null),s=Object(d.a)(l,2),o=s[0],j=s[1],b=Object(c.useState)(null),f=Object(d.a)(b,2),v=f[0],y=f[1],w=Object(c.useState)(null),S=Object(d.a)(w,2),T=S[0],C=S[1],E=Object(c.useState)(!1),P=Object(d.a)(E,2),N=P[0],B=P[1],M=Object(c.useState)(null),I=Object(d.a)(M,2),U=I[0],D=I[1],_=Object(c.useState)(null),F=Object(d.a)(_,2),W=F[0],G=F[1],H=r.a.createRef(),L=r.a.createRef(),z=r.a.createRef(),K=r.a.createRef(),V=function(){var e=H.current.value,t=L.current.value,n=z.current.value,a=K.current.value;i(null),j(null),y(null),C(null),D(null),G(null),e.length<=0?i("Tidak boleh kosong"):g(e)?t.length<=0?j("Tidak boleh kosong"):n.length<8?y("Password tidak boleh kurang dari 8 karakter"):n!==a?(C("Harus sama"),y("Harus sama")):(B(!0),function(e,t,n){return A("".concat(k,"b/user/register/request"),"POST",{"Content-Type":"application/json"},{email:e,fullname:t,password:n})}(e,t,n).then((function(e){500===e.status?G("Terjadi masalah, mohon coba lagi nanti."):409===e.status?i("Email sudah dipakai"):D("Silakan cek email anda untuk verifikasi"),B(!1)}))):i("Email tidak berlaku")};return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Daftar SIPEMA"})}),Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",width:"320px",p:"10px",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:"SIPEMA"}),Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:"Sistem Informasi Pengajian Musholla Al-Ikhlas"}),U?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"success",title:"Berhasil Mendaftar",body:U})}):W?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"error",title:"Gagal Mendaftar",body:W})}):null,Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{label:"Email",placeholder:"Masukan email anda...",fullWidth:!0,inputRef:H,error:n,helperText:n,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),V())}})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{label:"Nama lengkap",placeholder:"Masukan nama lengkap anda...",fullWidth:!0,inputRef:L,error:o,helperText:o,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),V())}})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{label:"Password",type:"password",placeholder:"Masukan password anda...",fullWidth:!0,inputRef:z,error:v,helperText:v,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),V())}})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{label:"Ulangi password",placeholder:"Ulangi password anda...",fullWidth:!0,inputRef:K,error:T,type:"password",helperText:T,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),V())}})}),Object(a.jsx)(h.a,{mt:"40px",children:Object(a.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:N,onClick:V,children:N?"MENDAFTAR...":"DAFTAR"})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsxs)(O.a,{align:"center",children:["Sudah punya akun ? ",Object(a.jsx)(u.b,{to:"/login",children:"Login"})]})})]})})]})}var W=n(172),G=n(227);function H(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)(!1),s=Object(d.a)(l,2),o=s[0],j=s[1],b=Object(c.useState)(null),f=Object(d.a)(b,2),v=f[0],y=f[1],w=Object(c.useState)(null),S=Object(d.a)(w,2),T=S[0],C=S[1],E=r.a.createRef(),P=function(){i(null),y(null),C(null);var e=E.current.value;e.length<=0?i("Tidak boleh kosong"):g(e)?(j(!0),function(e){return A("".concat(k,"b/user/password/reset"),"POST",{"Content-Type":"application/json"},{email:e})}(e).then((function(e){500===e.status?y("Terjadi masalah, mohon coba lagi nanti."):404===e.status?y("Email tidak terdaftar."):C("Silakan cek email anda. Jika tidak ada, coba cek folder spam."),j(!1)}))):i("Email tidak berlaku")};return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Lupa Password SIPEMA"})}),Object(a.jsxs)(h.a,{display:"flex",minHeight:"100vh",width:"100%",flexDirection:"column",children:[Object(a.jsx)(h.a,{p:{xs:"0",sm:"10px"},children:Object(a.jsx)(W.a,{component:u.b,to:"/login",children:Object(a.jsx)(G.a,{})})}),Object(a.jsxs)(h.a,{margin:"auto",width:"320px",p:"10px",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:"Lupa Password Akun SIPEMA"}),Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:"Anda akan dikirimi email yang berisi tautan untuk mengganti password anda."}),T?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"success",title:"Permintaan reset password berhasil",body:T})}):v?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"error",title:"Permintaan reset password gagal",body:v})}):null,Object(a.jsx)(h.a,{my:"40px",children:Object(a.jsx)(x.a,{label:"Email",placeholder:"Masukan email anda...",fullWidth:!0,inputRef:E,error:n,helperText:n,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),P())}})}),Object(a.jsx)(h.a,{display:"flex",flexDirection:"row-reverse",children:Object(a.jsx)(p.a,{variant:"contained",color:"primary",fullWidth:!0,disabled:o,onClick:P,children:o?"MERESET PASSWORD...":"RESET PASSWORD"})})]})]})]})}var L=n(228);function z(){return Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsx)(h.a,{margin:"auto",children:Object(a.jsx)(L.a,{number:100})})})}function K(){var e=Object(b.h)().token,t=Object(c.useState)(null),n=Object(d.a)(t,2),r=n[0],i=n[1],l=Object(c.useState)(!0),s=Object(d.a)(l,2),o=s[0],j=s[1];return Object(c.useEffect)((function(){j(!0),function(e){return E("".concat(k,"b/user/register/token/").concat(e),"PUT")}(e).then((function(e){500===e.status?(i("ERROR 500: Terjadi masalah, mohon coba lagi nanti."),j(!1)):401===e.status?(i("ERROR 401: Token sudah kadaluarsa."),j(!1)):403===e.status?(i("ERROR 403: Token tidak berlaku."),j(!1)):e.json().then((function(e){I(e.token),window.location.href="/"}))}))}),[e]),o?Object(a.jsx)(z,{}):r?Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:r}),Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(a.jsx)("a",{href:"/",children:w})})]})}):Object(a.jsx)("p",{children:"Success"})}function V(){var e=Object(b.h)().token,t=Object(c.useState)(!0),n=Object(d.a)(t,2),i=n[0],l=n[1],s=Object(c.useState)(null),o=Object(d.a)(s,2),j=o[0],f=o[1],g=Object(c.useState)(!1),v=Object(d.a)(g,2),y=v[0],S=v[1],T=Object(c.useState)(null),C=Object(d.a)(T,2),P=C[0],N=C[1],B=Object(c.useState)(null),M=Object(d.a)(B,2),I=M[0],U=M[1],D=Object(c.useState)(null),_=Object(d.a)(D,2),F=_[0],W=_[1],G=Object(c.useState)(null),H=Object(d.a)(G,2),L=H[0],K=H[1],V=r.a.createRef(),Y=r.a.createRef();Object(c.useEffect)((function(){l(!0),function(e){return E("".concat(k,"b/user/password/reset/check/token/").concat(e),"GET")}(e).then((function(e){500===e.status?f("ERROR 500: Terjadi masalah, mohon coba lagi nanti."):401===e.status?f("ERROR 401: Token kadaluarsa."):404===e.status&&f("ERROR 404: Token tidak valid."),l(!1)}))}),[e]);var J=function(){W(null),K(null),N(null),U(null);var t=V.current.value,n=Y.current.value;t.length<8?N("Panjang password tidak boleh kurang dari 8 karakter"):t!==n?(N("Harus sama"),U("Harus sama")):(S(!0),function(e,t){return A("".concat(k,"b/user/password/reset/token/").concat(e),"PUT",{"Content-Type":"application/json"},{password:t})}(e,t).then((function(e){500===e.status?K("Terjadi masalah, mohon coba lagin nanti."):404===e.status?K("Token tidak valid."):401===e.status?K("Token telah kadaluarsa."):W(Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(O.a,{gutterBottom:!0,children:"Silakan login dengan password baru anda."}),Object(a.jsx)(h.a,{display:"flex",children:Object(a.jsx)(h.a,{margin:"auto",children:Object(a.jsx)(p.a,{color:"primary",component:u.b,to:"/login",children:"LOGIN"})})})]})),S(!1)})))};return i?Object(a.jsx)(z,{}):j?Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",p:"10px",children:[Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:j}),Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:Object(a.jsx)(u.b,{to:"/",children:w})})]})}):Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Ganti Password SIPEMA"})}),Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",p:"10px",width:"320px",children:[Object(a.jsx)(O.a,{align:"center",variant:"h5",gutterBottom:!0,children:"Ganti Password Akun SIPEMA"}),F?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(R,{severity:"success",title:"Berhasil Mengganti Password",body:F})}):L?Object(a.jsx)(R,{severity:"error",title:"Gagal Mengganti Password",body:L}):null,Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{type:"password",fullWidth:!0,label:"Password Baru",placeholder:"Masukan password baru anda...",error:P,helperText:P,inputRef:V,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),J())}})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{type:"password",fullWidth:!0,label:"Ulangi Password",placeholder:"Ulangi password baru anda...",error:I,helperText:I,inputRef:Y,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),J())}})}),Object(a.jsx)(h.a,{my:"40px",children:Object(a.jsx)(p.a,{fullWidth:!0,variant:"contained",color:"primary",disabled:y,onClick:J,children:y?"MENGGANTI PASSWORD...":"GANTI PASSWORD"})})]})})]})}var Y=n(15),J=function(e){return{type:"LOG_IN",payload:e}};function q(){var e=M(),t=Object(Y.c)((function(e){return e.loginUser})),n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],l=r[1];return Object(a.jsx)(h.a,{display:"flex",minHeight:"100vh",width:"100%",children:Object(a.jsxs)(h.a,{margin:"auto",width:"320px",children:[Object(a.jsx)(O.a,{gutterBottom:!0,align:"center",children:"Selamat datang di SIPEMA"}),Object(a.jsx)(h.a,{mb:"30px"}),Object(a.jsx)(O.a,{variant:"h5",align:"center",gutterBottom:!0,children:t.fullname}),Object(a.jsx)(h.a,{mb:"30px"}),Object(a.jsx)(O.a,{gutterBottom:!0,align:"center",children:"Pendaftaran Anda belum disetujui, silakan hubungi guru anda."}),Object(a.jsx)(h.a,{mb:"40px"}),Object(a.jsx)(h.a,{my:"40px",display:"flex",children:Object(a.jsx)(h.a,{margin:"auto",children:Object(a.jsx)(p.a,{color:"primary",disabled:i,onClick:function(){l(!0),P(e).then((function(e){e.ok&&(U(),window.location.href="/login"),l(!1)}))},children:i?"LOGGING OUT...":"LOG OUT"})})})]})})}var X=n(240),Q=n(229),$=n(230),Z=n(231),ee=n(273),te=n(281),ne=n(133),ae=n(233),ce=n(276),re=n(232),ie=Object(Q.a)((function(){return{root:{backgroundColor:"white"}}}));function le(e){var t=ie(),n=e.loginUser,i=Object(c.useState)(null),l=Object(d.a)(i,2),s=l[0],o=l[1],j=Object(c.useState)(!1),b=Object(d.a)(j,2),O=b[0],x=b[1],m=Object(c.useState)(null),f=Object(d.a)(m,2),g=f[0],v=f[1],y=e.onMenuButtonClick;return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)($.a,{className:t.root,elevation:1,children:Object(a.jsxs)(Z.a,{children:[Object(a.jsx)(h.a,{width:"50%",display:"flex",children:Object(a.jsx)(ee.a,{mdUp:!0,children:Object(a.jsx)(W.a,{size:"small",onClick:y,children:Object(a.jsx)(re.a,{})})})}),Object(a.jsx)(h.a,{width:"50%",display:"flex",flexDirection:"row-reverse",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(W.a,{onClick:function(e){o(e.currentTarget)},size:"small",children:Object(a.jsx)(te.a,{src:n.pp,children:n.fullname.charAt(0)})}),Object(a.jsxs)(ne.a,{open:s,onClose:function(){o(null)},anchorEl:s,children:[Object(a.jsx)(ae.a,{component:u.b,to:"/profile",children:"Profil"}),Object(a.jsx)(ae.a,{component:p.a,onClick:function(){x(!0),P(M()).then((function(e){e.ok?(U(),window.location.href="/"):(v("Gagal Log Out."),x(!1))}))},disabled:O,children:O?"Logging Out...":"Log Out"})]})]})})]})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:g,onClose:function(){v(null)},message:g,autoHideDuration:6e3})]})}var se=n(277),oe=n(242),je=n(282),ue=n(241),be=n(225),de=n(173),he=n(235),Oe=n(237),xe=n(236),pe=n(238),me=n(239),fe=n(234),ge=Object(Q.a)((function(){return{listBtn:{color:"black",fontWeight:"bold"},listItemIcon:{color:"black"},activeLink:{backgroundColor:fe.a[100],borderRadius:"0 20px 20px 0"}}}));function ve(){var e=ge();return Object(a.jsxs)(be.a,{children:[Object(a.jsxs)(de.a,{button:!0,className:e.listBtn,component:u.c,exact:!0,to:"/",activeClassName:e.activeLink,children:[Object(a.jsx)(he.a,{className:e.listItemIcon,children:Object(a.jsx)(xe.a,{})}),Object(a.jsx)(Oe.a,{primary:"Pengumuman"})]}),Object(a.jsxs)(de.a,{button:!0,className:e.listBtn,component:u.c,to:"/students",activeClassName:e.activeLink,children:[Object(a.jsx)(he.a,{className:e.listItemIcon,children:Object(a.jsx)(pe.a,{})}),Object(a.jsx)(Oe.a,{primary:"Manajemen Murid"})]}),Object(a.jsxs)(de.a,{button:!0,className:e.listBtn,component:u.c,to:"/payment",activeClassName:e.activeLink,children:[Object(a.jsx)(he.a,{className:e.listItemIcon,children:Object(a.jsx)(me.a,{})}),Object(a.jsx)(Oe.a,{primary:"Riwayat Pembayaran Murid"})]}),Object(a.jsxs)(de.a,{button:!0,className:e.listBtn,component:u.c,to:"/log",activeClassName:e.activeLink,children:[Object(a.jsx)(he.a,{className:e.listItemIcon,children:Object(a.jsx)(X.a,{})}),Object(a.jsx)(Oe.a,{primary:"Log Aktivitas Pengguna"})]})]})}var ye=Object(Q.a)((function(){return{root:{backgroundColor:"white"}}}));function ke(e){var t=e.loginUser,n=Object(c.useState)(!1),i=Object(d.a)(n,2),l=i[0],s=i[1],o=ye(),j=Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsx)(ee.a,{mdUp:!0,children:Object(a.jsx)(h.a,{my:"auto",children:Object(a.jsx)(W.a,{onClick:function(){s(!1)},children:Object(a.jsx)(ue.a,{})})})}),Object(a.jsx)(h.a,{p:"20px",children:Object(a.jsx)(O.a,{variant:"h4",children:"SIPEMA"})})]}),Object(a.jsx)(p.a,{component:u.b,to:"/profile",children:Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsx)(te.a,{src:t.pp,children:t.fullname.charAt(0)}),Object(a.jsx)(h.a,{ml:"10px",my:"auto",width:"200px",children:Object(a.jsx)(se.a,{title:t.fullname,children:Object(a.jsx)(O.a,{variant:"h6",noWrap:!0,children:t.fullname})})})]})}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(oe.a,{})}),"teacher"===t.role?Object(a.jsx)(ve,{}):null]});return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(le,{loginUser:t,onMenuButtonClick:function(){s(!0)}}),Object(a.jsx)(ee.a,{smDown:!0,children:Object(a.jsx)(je.a,{variant:"permanent",children:j})}),Object(a.jsx)(ee.a,{mdUp:!0,children:Object(a.jsx)(je.a,{open:l,onClose:function(){s(!1)},children:j})}),Object(a.jsx)(h.a,{className:o.root,width:"100%",minHeight:"100vh",children:Object(a.jsx)(h.a,{pt:"90px",ml:{md:"290px"},px:"10px",children:e.children})})]})}var we=n(243),Se=n(244),Te=n(19),Ce=n.n(Te);function Ae(e){var t=e.icon,n=e.title;return Object(a.jsxs)(we.a,{container:!0,children:[Object(a.jsx)(we.a,{item:!0,xs:12,sm:8,children:Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsx)(h.a,{my:"auto",mr:"10px",children:t}),Object(a.jsx)(O.a,{variant:"h4",children:n})]})}),Object(a.jsx)(ee.a,{only:"xs",children:Object(a.jsx)(we.a,{item:!0,sm:4,children:Object(a.jsxs)(h.a,{display:"flex",flexDirection:"row-reverse",width:"100%",height:"100%",children:[Object(a.jsx)(h.a,{my:"auto",children:Object(a.jsx)(O.a,{children:Ce()().format("ll")})}),Object(a.jsx)(h.a,{mr:"10px",display:"flex",alignItems:"center",children:Object(a.jsx)(Se.a,{})})]})})})]})}var Ee=function(e,t,n){return A("".concat(k,"b/log/get/").concat(t,"/").concat(n),"GET",{token:e})},Pe=n(245),Ne=n(246),Be=n(247),Re=n(248),Me=n(249),Ie=n(250),Ue=n(251),De=n(7),_e=n(283),Fe=n(116),We=Object(De.a)({missingOppositeContent:{"&:before":{display:"none"}}})(Pe.a),Ge=Object(Q.a)((function(){return{time:{color:"grey",fontSize:"0.9rem"}}}));function He(){for(var e=Ge(),t=Object(Y.c)((function(e){return e.loginUser})),n=Object(c.useState)([]),r=Object(d.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)(!0),o=Object(d.a)(s,2),j=o[0],u=o[1],b=Object(c.useState)(!1),x=Object(d.a)(b,2),f=x[0],g=x[1],v=[],y=0;y<10;y++)v.push(Object(a.jsx)(h.a,{my:"10px",children:Object(a.jsx)(Ne.a,{variant:"rect",height:"60px",width:"100%"})}));Object(c.useEffect)((function(){Ee(M(),0,10).then((function(e){e.ok?e.json().then((function(e){l(e.logs);var t=e.total;g(e.logs.length<t),u(!1)})):u(!1)}))}),[]);var k=null;return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Aktivitas Pengguna SIPEMA"})}),Object(a.jsxs)(ke,{loginUser:t,children:[Object(a.jsx)(Ae,{icon:Object(a.jsx)(X.a,{fontSize:"large"}),title:"Log Aktivitas Pengguna"}),Object(a.jsxs)(h.a,{pl:{xs:0,lg:"100px"},mt:"50px",children:[Object(a.jsxs)(Be.a,{children:[i.map((function(t,n,r){var i=t.created,l=t.user.fullname,s=t.desc,o=t.user.pp,j=Ce.a.unix(i).format("ll"),u=!1;return k!==j&&(k=j,u=!0),Object(a.jsxs)(c.Fragment,{children:[u?Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(_e.a,{label:j})}):null,Object(a.jsxs)(We,{children:[Object(a.jsxs)(Re.a,{children:[Object(a.jsx)(Me.a,{}),r.length-1===n?null:Object(a.jsx)(Ie.a,{})]}),Object(a.jsx)(Ue.a,{children:Object(a.jsxs)(h.a,{display:"flex",component:Fe.a,elevation:3,p:"10px",children:[Object(a.jsxs)(h.a,{width:"100%",display:"flex",children:[Object(a.jsx)(h.a,{display:"flex",alignItems:"center",mr:"10px",children:Object(a.jsx)(te.a,{src:o,children:l.charAt(0)})}),Object(a.jsx)(h.a,{display:"flex",alignItems:"center",children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)("b",{children:l})," ",s]})})]}),Object(a.jsx)(h.a,{children:Object(a.jsx)(O.a,{className:e.time,children:Ce.a.unix(i).format("LT")})})]})})]},t._id)]})})),j?v:null]}),!j&&f?Object(a.jsx)(h.a,{width:"100%",display:"flex",justifyContent:"center",pb:"50px",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){u(!0);var e=i.length-1;Ee(M(),e,10).then((function(e){e.ok?e.json().then((function(e){var t=e.total,n=i.slice();n=n.concat(e.logs),g(n.length<t),l(n),u(!1)})):u(!1)}))},children:"MUAT LEBIH BANYAK"})}):null]})]})]})}var Le=n(31),ze=n(257),Ke=n(256),Ve=n(258),Ye=n(252),Je=n(253),qe=n(254);function Xe(e){var t=Object(c.createRef)(),n=Object(c.createRef)(),r=e.headerTitle,i=e.btnName,l=e.defaultTitle,s=e.defaultBody,o=Object(c.useState)(null),j=Object(d.a)(o,2),u=j[0],b=j[1],O=Object(c.useState)(null),m=Object(d.a)(O,2),f=m[0],g=m[1],v=Object(c.useState)(!1),y=Object(d.a)(v,2),k=y[0],w=y[1];return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(Ye.a,{children:r}),Object(a.jsxs)(Je.a,{children:[Object(a.jsx)(x.a,{inputRef:t,error:u,helperText:u,label:"Judul",placeholder:"Masukan judul pengumuman...",defaultValue:l,fullWidth:!0}),Object(a.jsx)(h.a,{my:"20px"}),Object(a.jsx)(x.a,{inputRef:n,error:f,helperText:f,label:"Isi Pengumuman",placeholder:"Masukan isi pengumuman...",multiline:!0,defaultValue:s,fullWidth:!0})]}),Object(a.jsx)(qe.a,{children:Object(a.jsx)(p.a,{color:"primary",disabled:k,onClick:function(){b(null),g(null);var a=t.current.value,c=n.current.value;if(a.length<=0)b("Tidak boleh kosong");else if(c.length<=0)g("Tidak boleh kosong");else{w(!0),e.handleSubmit(a,c).then((function(e){e||w(!1)}))}},children:k?i.loading:i.normal})})]})}var Qe=function(e,t,n){return A("".concat(k,"b/announcement/create"),"POST",{"Content-Type":"application/json",token:n},{title:e,body:t})},$e=function(e,t,n,a){return A("".concat(k,"b/announcement/edit/").concat(e),"PUT",{"Content-Type":"application/json",token:a},{title:t,body:n})},Ze=function(e,t){return E("".concat(k,"b/announcement/delete/").concat(e),"DELETE",{token:t})},et=function(e,t,n){return E("".concat(k,"b/announcement/get/").concat(e,"/").concat(t),"GET",{token:n})},tt=n(81),nt=n(255),at=Object(Q.a)((function(){return{created:{color:"grey"}}}));function ct(e){var t=at(),n=e.announcement,r=n.title,i=n.body,l=n.created,s=e.onDelete,o=Object(c.useState)(null),j=Object(d.a)(o,2),u=j[0],b=j[1],x=Object(c.useState)(!1),m=Object(d.a)(x,2),f=m[0],g=m[1],v=e.onBodyClick;return Object(a.jsxs)(h.a,{mx:"auto",my:"10px",width:{xs:"100%",sm:"500px"},component:Fe.a,height:"140px",p:"10px",elevation:3,display:"flex",flexDirection:"column",children:[Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsx)(h.a,{width:"90%",component:tt.a,onClick:v,justifyContent:"left",children:Object(a.jsx)(O.a,{variant:"h6",gutterBottom:!0,noWrap:!0,align:"left",children:r})}),s?Object(a.jsxs)(h.a,{display:"flex",width:"10%",flexDirection:"row-reverse",children:[Object(a.jsx)(W.a,{size:"small",onClick:function(e){b(e.currentTarget)},children:Object(a.jsx)(nt.a,{})}),Object(a.jsx)(ne.a,{open:u,anchorEl:u,onClose:function(){b(null)},children:Object(a.jsx)(ae.a,{component:p.a,disabled:f,onClick:function(){g(!0),s().then((function(e){e||g(!1)}))},children:f?"MENGHAPUS...":"HAPUS"})})]}):null]}),Object(a.jsx)(O.a,{align:"justify",gutterBottom:!0,noWrap:!0,onClick:v,children:i}),Object(a.jsx)(h.a,{display:"flex",flexDirection:"column-reverse",flex:1,onClick:v,children:Object(a.jsx)(O.a,{align:"right",className:t.created,children:Ce.a.unix(l).fromNow()})})]})}var rt=Object(Q.a)((function(e){var t;return{fab:(t={position:"fixed"},Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(1),bottom:e.spacing(1)}),Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(2),bottom:e.spacing(2)}),t),created:{color:"grey"}}}));function it(){var e=Object(b.g)(),t=rt(),n=Object(Y.c)((function(e){return e.loginUser})),r=Object(c.useState)(!1),i=Object(d.a)(r,2),l=i[0],s=i[1],o=Object(c.useState)(null),j=Object(d.a)(o,2),u=j[0],x=j[1],f=Object(c.useState)([]),g=Object(d.a)(f,2),v=g[0],y=g[1],k=Object(c.useState)(!0),w=Object(d.a)(k,2),S=w[0],A=w[1],E=Object(c.useState)(!1),P=Object(d.a)(E,2),N=P[0],B=P[1],R=[];Object(c.useEffect)((function(){et(0,5,M()).then((function(e){e.ok?e.json().then((function(e){var t=e.announcements,n=e.count;y(t),B(n>t.length),A(!1)})):A(!1)}))}),[]);for(var I=0;I<5;I++)R.push(Object(a.jsx)(h.a,{my:"10px",mx:"auto",height:"140px",width:{xs:"100%",sm:"500px"},children:Object(a.jsx)(Ne.a,{variant:"rect",width:"100%",height:"100%"})}));return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Pengumuman SIPEMA"})}),Object(a.jsxs)(ke,{loginUser:n,children:[Object(a.jsx)(Ae,{icon:Object(a.jsx)(xe.a,{fontSize:"large"}),title:"Pengumuman"}),Object(a.jsx)(h.a,{minHeight:"75vh",width:"100%",display:"flex",flexDirection:"column",children:v.length<=0&&!S?Object(a.jsx)(h.a,{margin:"auto",children:Object(a.jsx)(O.a,{variant:"h6",children:"Tidak ada pengumuman."})}):Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(h.a,{my:"25px"}),v.map((function(t){var n=t._id,c=t.is_owner;return Object(a.jsx)(ct,{onBodyClick:function(){e.push("/a/".concat(n))},announcement:t,onDelete:c?Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(n,M()).then((function(e){if(e.ok){x("Berhasil menghapus pengumuman."),A(!0);var t=v.length;return y([]),et(0,t,M()).then((function(e){e.ok?e.json().then((function(e){var t=e.announcements,n=e.count;y(t),B(n>t.length),A(!1)})):A(!1)})),!0}return x("Gagal menghapus pengumuman."),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))):null})})),S?R:N?Object(a.jsx)(h.a,{py:"20px",display:"flex",justifyContent:"center",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){var e=v.length;A(!0),et(e,5,M()).then((function(e){e.ok?e.json().then((function(e){var t=e.count,n=v.concat(e.announcements);y(n),B(t>n.length),A(!1)})):A(!1)}))},children:"MUAT LEBIH BANYAK"})}):null]})}),Object(a.jsx)(Ke.a,{className:t.fab,color:"primary",size:"small",onClick:function(){s(!0)},children:Object(a.jsx)(ze.a,{})})]}),Object(a.jsx)(Ve.a,{open:l,onClose:function(){s(!1)},fullWidth:!0,children:Object(a.jsx)(Xe,{headerTitle:"Membuat Pengumuman",btnName:{normal:"BUAT",loading:"MEMBUAT..."},handleSubmit:function(){var e=Object(C.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t,n,M()).then((function(e){return e.ok?(x("Berhasil membuat pengumuman."),s(!1),A(!0),et(0,v.length,M()).then((function(e){e.ok?e.json().then((function(e){var t=e.count,n=e.announcements;y(n),B(t>n.length),A(!1)})):A(!1)})),y([]),!0):(x("Gagal membuat pengumuman."),!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:u,open:u,autoHideDuration:6e3,onClose:function(){x(null)}},u)]})}var lt=function(e,t,n,a){return E("".concat(k,"b/student/get/").concat(t,"/").concat(n,"/").concat(a),"GET",{token:e})},st=function(e,t,n){return A("".concat(k,"b/student/set/").concat(t),"PUT",{token:e,"Content-Type":"application/json"},{approved:n})},ot=Object(Q.a)((function(e){return{avatar:{height:e.spacing(8),width:e.spacing(8),fontSize:"50px"},greyColor:{color:"grey"}}}));function jt(e){var t=ot(),n=Object(c.useState)(!1),r=Object(d.a)(n,2),i=r[0],l=r[1],s=e.student,o=s.user.pp,j=s.user.fullname;return Object(a.jsxs)(h.a,{component:Fe.a,elevation:3,p:"10px",my:"10px",display:"flex",width:{xs:"100%",sm:"500px"},children:[Object(a.jsx)(h.a,{my:"auto",mr:"5px",children:Object(a.jsx)(te.a,{className:t.avatar,src:o,children:j.charAt(0)})}),Object(a.jsxs)(h.a,{my:"auto",width:"100%",children:[Object(a.jsx)(O.a,{children:Object(a.jsx)("b",{children:j})}),Object(a.jsx)(O.a,{className:t.greyColor,children:"Murid"})]}),Object(a.jsx)(h.a,{display:"flex",alignContent:"center",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){l(!0),e.onAcc().then((function(e){e||l(!1)}))},disabled:i,children:i?"MENERIMA...":"TERIMA"})})]})}var ut=Object(Q.a)((function(e){return{avatar:{height:e.spacing(8),width:e.spacing(8),fontSize:"50px"},greyColor:{color:"grey"}}}));function bt(e){var t=e.student,n=t._id,r=t.user.pp,i=t.user.fullname,l=ut(),s=Object(c.useState)(null),o=Object(d.a)(s,2),j=o[0],b=o[1],x=Object(c.useState)(!1),m=Object(d.a)(x,2),f=m[0],g=m[1];return Object(a.jsxs)(h.a,{component:Fe.a,elevation:3,p:"10px",my:"10px",display:"flex",width:{xs:"100%",sm:"500px"},children:[Object(a.jsx)(h.a,{my:"auto",mr:"5px",children:Object(a.jsx)(te.a,{className:l.avatar,src:r,children:i.charAt(0)})}),Object(a.jsxs)(h.a,{my:"auto",width:"100%",children:[Object(a.jsx)(O.a,{children:Object(a.jsx)("b",{children:i})}),Object(a.jsx)(O.a,{className:l.greyColor,children:"Murid"})]}),Object(a.jsxs)(h.a,{children:[Object(a.jsx)(W.a,{size:"small",onClick:function(e){b(e.currentTarget)},children:Object(a.jsx)(nt.a,{size:"small"})}),Object(a.jsxs)(ne.a,{open:j,anchorEl:j,onClose:function(){b(null)},children:[Object(a.jsx)(ae.a,{component:u.b,to:"/s/".concat(n),children:"Lihat Detil"}),Object(a.jsx)(ae.a,{component:p.a,disabled:f,onClick:function(){g(!0),e.onKick().then((function(e){e||g(!1)}))},children:f?"MENENDANG...":"TENDANG"})]})]})]})}function dt(){var e=Object(Y.c)((function(e){return e.loginUser})),t=Object(c.useState)(!0),n=Object(d.a)(t,2),i=n[0],l=n[1],s=Object(c.useState)(!0),o=Object(d.a)(s,2),j=o[0],u=o[1],b=Object(c.useState)([]),x=Object(d.a)(b,2),f=x[0],g=x[1],v=Object(c.useState)(!1),y=Object(d.a)(v,2),k=y[0],w=y[1],S=Object(c.useState)([]),A=Object(d.a)(S,2),E=A[0],P=A[1],N=Object(c.useState)(!1),B=Object(d.a)(N,2),R=B[0],I=B[1],U=Object(c.useState)(null),D=Object(d.a)(U,2),_=D[0],F=D[1];Object(c.useEffect)((function(){var e=M();lt(e,0,3,!0).then((function(e){e.ok?e.json().then((function(e){var t=e.students,n=e.count;g(t),w(n>t.length),l(!1)})):l(!1)})),lt(e,0,3,!1).then((function(e){e.ok?e.json().then((function(e){var t=e.students,n=e.count;P(t),I(n>t.length),u(!1)})):l(!1)}))}),[]);for(var W=[],G=0;G<3;G++)W.push(Object(a.jsx)(h.a,{my:"10px",width:{xs:"100%",sm:"500px"},mx:"auto",children:Object(a.jsx)(Ne.a,{variant:"rect",height:"60px"})}));return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Manajemen Murid SIPEMA"})}),Object(a.jsxs)(ke,{loginUser:e,children:[Object(a.jsx)(Ae,{icon:Object(a.jsx)(pe.a,{fontSize:"large"}),title:"Manajemen Murid"}),Object(a.jsxs)(h.a,{mt:"50px",children:[Object(a.jsxs)(h.a,{mb:"20px",children:[f.map((function(e,t){var n=e._id,c=e.user.fullname;return Object(a.jsx)(h.a,{display:"flex",justifyContent:"center",children:Object(a.jsx)(bt,{student:e,onKick:Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(M(),n,!1).then((function(e){if(e.ok){var n=E.length+1;lt(M(),0,n,!1).then((function(e){e.ok?e.json().then((function(e){var t=e.count,n=e.students;P(n),I(n.length<t),u(!1)})):u(!1)})),P([]),u(!0);var a=f.slice();return a.splice(t,1),g(a),F("".concat(c," berhasil ditendang.")),!0}return F("Gagal menendang murid."),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},n)})})),i?W:f.length<=0?Object(a.jsx)(h.a,{mt:"20px",mb:"50px",children:Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:"Murid Kosong."})}):null]}),k&&!i?Object(a.jsx)(h.a,{display:"flex",justifyContent:"center",alignContent:"center",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){var e=f.slice();l(!0),lt(M(),e.length,3,!0).then((function(t){t.ok?t.json().then((function(t){var n=e.concat(t.students);g(n),w(n.length<t.count),l(!1)})):l(!1)}))},children:"MUAT LEBIH BANYAK"})}):null,Object(a.jsx)(h.a,{mt:"50px",children:Object(a.jsx)(O.a,{variant:"h5",gutterBottom:!0,children:"Murid yang Belum Disetujui"})}),Object(a.jsx)(oe.a,{}),Object(a.jsxs)(h.a,{mb:"20px",mt:"10px",children:[E.map((function(e,t){var n=e._id,c=e.user.fullname;return Object(a.jsx)(h.a,{display:"flex",justifyContent:"center",children:Object(a.jsx)(jt,{student:e,onAcc:Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st(M(),n,!0).then((function(e){if(e.ok){var n=f.length+1;g([]),l(!0),lt(M(),0,n,!0).then((function(e){e.ok?e.json().then((function(e){var t=e.students,n=e.count;g(t),w(t.length<n),l(!1)})):l(!1)}));var a=E.slice();return a.splice(t,1),P(a),F("".concat(c," diterima menjadi murid.")),!0}return F("Gagal menerima murid"),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},n)})})),j?W:E.length<=0?Object(a.jsx)(h.a,{pb:"50px",mt:"20px",children:Object(a.jsx)(O.a,{gutterBottom:!0,align:"center",children:"Murid yang belum disetujui kosong."})}):null]}),R&&!j?Object(a.jsx)(h.a,{display:"flex",justifyContent:"center",alignContent:"center",pb:"50px",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){var e=E.slice();u(!0),lt(M(),e.length,3,!1).then((function(t){t.ok?t.json().then((function(t){var n=e.concat(t.students);P(n),I(n.length<t.count),u(!1)})):u(!1)}))},children:"MUAT LEBIH BANYAK"})}):null]})]}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:_,open:_,autoHideDuration:6e3,onClose:function(){F(null)}},_)]})}var ht=function(e,t,n){return E("".concat(k,"b/payment/get/all/").concat(t,"/").concat(n),"GET",{token:e})},Ot=function(e,t,n,a){return E("".concat(k,"b/payment/get/s/").concat(t,"/").concat(n,"/").concat(a),"GET",{token:e})},xt=function(e,t,n,a){return A("".concat(k,"b/payment/create/").concat(t),"POST",{token:e,"Content-Type":"application/json"},{amount:n,tanggal:a})},pt=function(e,t,n,a){return A("".concat(k,"b/payment/edit/").concat(t),"PUT",{token:e,"Content-Type":"application/json"},{amount:n,tanggal:a})},mt=Object(Q.a)((function(){return{paymentSum:{backgroundColor:fe.a[100]},greyColor:{color:"grey"},link:{color:"black",textDecoration:"none"}}}));function ft(){for(var e=mt(),t=Object(c.useState)(!0),n=Object(d.a)(t,2),i=n[0],l=n[1],s=Object(c.useState)(!0),o=Object(d.a)(s,2),j=o[0],b=o[1],x=Object(c.useState)(0),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)([]),w=Object(d.a)(v,2),S=w[0],T=w[1],C=Object(c.useState)(!1),A=Object(d.a)(C,2),P=A[0],N=A[1],B=[],R=0;R<5;R++)B.push(Object(a.jsx)(h.a,{mb:"20px",children:Object(a.jsx)(Ne.a,{variant:"rect",height:"75px",width:"100%"})}));Object(c.useEffect)((function(){var e;(e=M(),E("".concat(k,"b/payment/get/total"),"GET",{token:e})).then((function(e){e.ok?e.json().then((function(e){g(e.amount),l(!1)})):l(!1)})),ht(M(),0,5).then((function(e){e.ok?e.json().then((function(e){var t=e.payments,n=e.count;N(t.length<n),T(t),b(!1)})):b(!1)}))}),[]);var I=Object(Y.c)((function(e){return e.loginUser}));return Object(a.jsx)(r.a.Fragment,{children:Object(a.jsxs)(ke,{loginUser:I,children:[Object(a.jsx)(Ae,{icon:Object(a.jsx)(me.a,{fontSize:"large"}),title:"Riwayat Pembayaran Murid"}),Object(a.jsx)(h.a,{mt:"20px",mb:"50px",children:Object(a.jsxs)(we.a,{container:!0,direction:"row-reverse",spacing:2,children:[Object(a.jsx)(we.a,{item:!0,xs:12,lg:4,children:Object(a.jsxs)(h.a,{component:Fe.a,width:"100%",height:"150px",elevation:3,className:e.paymentSum,p:"20px",children:[Object(a.jsx)(O.a,{variant:"h6",gutterButtom:!0,children:"Total:"}),Object(a.jsx)(O.a,{variant:"h6",children:i?"Menghitung...":"Rp".concat(y(f))})]})}),Object(a.jsxs)(we.a,{item:!0,xs:12,lg:8,children:[S.map((function(t){var n=t.student,c=n.fullname,r=n.student_id,i=t._id,l=t.amount,s=t.tanggal;return Object(a.jsxs)(h.a,{component:Fe.a,elevation:3,p:"15px",mb:"20px",children:[Object(a.jsx)(u.b,{to:"/s/".concat(r,"/pembayaran"),className:e.link,children:Object(a.jsxs)(O.a,{gutterBottom:!0,children:[Object(a.jsx)("b",{children:c}),"\xa0Rp",y(l)]})}),Object(a.jsx)(O.a,{gutterBottom:!0,className:e.greyColor,children:Ce.a.unix(s).format("ll")})]},i)})),j?B:P?Object(a.jsx)(h.a,{display:"flex",justifyContent:"center",onClick:function(){b(!0),ht(M(),S.length,5).then((function(e){e.ok?e.json().then((function(e){var t=S.concat(e.payments),n=e.count;N(n>t.length),T(t),b(!1)})):b(!1)}))},children:Object(a.jsx)(p.a,{color:"primary",children:"Muat Lebih Banyak"})}):null]})]})})]})})}var gt=n(131),vt=n.n(gt),yt=n(284),kt="app/student/TOGGLE_SIDEBAR",wt="app/student/profile/SHOW_FETCH_PROGRESS",St=function(){return{type:kt}},Tt=Object(Q.a)((function(e){return{appbar:{backgroundColor:e.palette.background.default,color:e.palette.text.secondary,zIndex:e.zIndex.drawer+1,border:"1px solid ".concat(e.palette.grey[300])},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},toolbar:{display:"flex",justifyContent:"space-between"}}})),Ct=function(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(b.g)(),l=Object(yt.a)((function(e){return fetch("https://sipema.herokuapp.com/b/user/logout",{method:"DELETE",headers:{token:window.localStorage.getItem("login_token")},body:JSON.stringify(e)})}),{onSuccess:function(e){window.localStorage.removeItem("login_token"),i.push("/login")}}),s=function(){r(null)},o=Object(Y.c)((function(e){return e.loginUser}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(ne.a,{id:"user-actions",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:s,children:[Object(a.jsx)(ae.a,{onClick:s,component:u.b,to:"/profile",children:"Profile"}),Object(a.jsx)(ae.a,{onClick:function(){l.mutate()},children:l.isLoading?"Logout....":"Logout"})]}),Object(a.jsx)(te.a,{src:o.pp,"aria-controls":"user-actions","aria-haspopup":"true",onClick:function(e){r(e.currentTarget)},style:{cursor:"pointer"}})]})},At=function(){var e=Tt(),t=Object(Y.b)();return Object(a.jsx)($.a,{className:e.appbar,elevation:0,children:Object(a.jsxs)(Z.a,{className:e.toolbar,children:[Object(a.jsx)(ee.a,{mdUp:!0,children:Object(a.jsx)(W.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(){t(St())},children:Object(a.jsx)(vt.a,{})})}),Object(a.jsx)(O.a,{variant:"h6",className:e.title,children:"SIPEMA"}),Object(a.jsx)(Ct,{})]})})},Et=Object(Q.a)((function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240,border:"none"},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)},listItem:{cursor:"pointer",color:e.palette.text.secondary,borderTopRightRadius:999,borderBottomRightRadius:999,"&.active":{backgroundColor:e.palette.grey[100],"& span":{fontWeight:"500 !important",color:e.palette.text.primary}},"&:hover":{color:e.palette.text.primary}},listItemTypography:{fontSize:16},list:{paddingTop:16,paddingBottom:16}}})),Pt=[{text:"Pengumuman",to:"/announcement"},{text:"Riwayat Bacaan",to:"/progress"},{text:"Pembayaran",to:"/payment"}],Nt=function(e){var t=Et(),n=e.open,c=e.onClose,r=e.variant;return Object(a.jsxs)(je.a,{variant:r,className:t.drawer,classes:{paper:t.drawerPaper},onClose:c,open:n,children:[Object(a.jsx)(Z.a,{}),Object(a.jsx)(be.a,{children:Pt.map((function(e,n){return Object(a.jsx)(de.a,{button:!0,to:e.to,component:u.c,className:t.listItem,children:Object(a.jsx)(Oe.a,{primary:e.text})},n)}))})]})};Nt.defaultProps={open:!1};var Bt=Nt,Rt=Object(Q.a)((function(e){return{page:{padding:"28px 12px"}}})),Mt=function(e){var t=e.children,n=Rt();return Object(a.jsx)("div",{className:n.page,children:t})},It=n(266),Ut=n(25),Dt=n(102),_t=n(23),Ft=n(104),Wt=n(285),Gt=n(259),Ht=n(260),Lt=1,zt=0;function Kt(e){var t=e.root,n=e.target,a=e.onIntersect,c=e.threshold,i=void 0===c?1:c,l=e.rootMargin,s=void 0===l?"0px":l,o=e.enabled,j=void 0===o||o;r.a.useEffect((function(){if(j){var e=new IntersectionObserver((function(e){return e.forEach((function(e){return e.isIntersecting&&a()}))}),{root:t&&t.current,rootMargin:s,threshold:i}),c=n&&n.current;if(c)return e.observe(c),function(){e.unobserve(c)}}}),[n.current,j])}var Vt=function(e){var t=e.amount,n=(e.created,e.tanggal),c=(e._id,Object(Ft.a)(e,["amount","created","tanggal","_id"]));return Object(a.jsx)(Gt.a,Object(_t.a)(Object(_t.a)({},c),{},{style:{marginTop:8},children:Object(a.jsxs)(Ht.a,{children:[Object(a.jsx)(O.a,{variant:"h5",component:"h2",children:Ce.a.unix(n).format("ll")}),Object(a.jsx)(O.a,{variant:"body2",component:"p",children:"Rp.".concat(t)})]})}))},Yt=function(e){return Object(a.jsx)(Ne.a,Object(_t.a)({variant:"rect",height:36,style:{marginTop:"8px"}},e))},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return Array(e).fill(0).map((function(e,t){return Object(a.jsx)(Yt,{},t)}))},qt=function(e){Object(Dt.a)(e);var t=Object(Y.c)((function(e){return e.loginUser})),n=Object(c.useRef)(null),r=Object(Wt.a)("payment",function(){var e=Object(C.a)(T.a.mark((function e(n){var a,c,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.pageParam,c=void 0===a?0:a,e.next=3,fetch("https://sipema.herokuapp.com/b/payment/get/s/".concat(t.student_id,"/").concat(c,"/").concat(3),{headers:{token:window.localStorage.getItem("login_token")}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){return!(e.payments.length<3)&&t.reduce((function(e,t){return e+t.payments.length}),0)}}),i=(r.status,r.data),l=(r.error,r.isFetching),s=r.isFetchingNextPage,o=r.fetchNextPage,j=r.hasNextPage,u=null===i||void 0===i?void 0:i.pages.reduce((function(e,t){return e.push.apply(e,Object(Ut.a)(t.payments)),e}),[]);return Kt({target:n,onIntersect:function(){return o()},enabled:j}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(O.a,{variant:"h6",gutterBottom:!0,children:["Pembayaran ",i&&l&&!s&&Object(a.jsx)(L.a,{size:16})]}),!i&&Jt(),null===u||void 0===u?void 0:u.map((function(e,t){return Object(c.createElement)(Vt,Object(_t.a)(Object(_t.a)({},e),{},{key:t}))})),s&&Jt(2),!s&&Object(a.jsx)("div",{className:"sentinel-end",ref:n})]})},Xt=Object(Q.a)((function(e){return{title:{marginBottom:"0.75rem"}}})),Qt=Object(Q.a)((function(e){return{card:{padding:16,marginBottom:8,cursor:"pointer"}}})),$t=function(e){var t=Qt(),n=e.body,c=e.title,r=e._id,i=Object(b.g)();return Object(a.jsxs)(Gt.a,{className:t.card,elevation:2,onClick:function(){return i.push("/announcement/".concat(r))},children:[Object(a.jsx)(O.a,{variant:"h6",gutterBottom:!0,children:c}),Object(a.jsx)(O.a,{gutterBottom:!0,color:"textSecondary",children:n})]})};$t.defaulProps={title:"unknown",content:"p"};var Zt=function(e){return Object(a.jsx)(Ne.a,Object(_t.a)({variant:"rect",height:118,style:{marginTop:"8px"}},e))},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Array(e).fill(0).map((function(e,t){return Object(a.jsx)(Zt,{},t)}))},tn=function(e){var t=Xt(),n=Object(c.useRef)(null),r=Object(Wt.a)("announcements",function(){var e=Object(C.a)(T.a.mark((function e(t){var n,a,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pageParam,a=void 0===n?0:n,e.next=3,fetch("https://sipema.herokuapp.com/b/announcement/get/".concat(a,"/").concat(5));case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){return!(e.announcements.length<5)&&t.reduce((function(e,t){return e+t.announcements.length}),0)}}),i=(r.status,r.data),l=(r.error,r.isFetching),s=r.isFetchingNextPage,o=r.fetchNextPage,j=r.hasNextPage,u=null===i||void 0===i?void 0:i.pages.reduce((function(e,t){return e.push.apply(e,Object(Ut.a)(t.announcements)),e}),[]);return Kt({target:n,onIntersect:function(){return o()},enabled:j}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(O.a,{className:t.title,variant:"h6",gutterBottom:!0,children:["Announcement ",i&&l&&!s&&Object(a.jsx)(L.a,{size:16})]}),!i&&en(),null===u||void 0===u?void 0:u.map((function(e,t){return Object(c.createElement)($t,Object(_t.a)(Object(_t.a)({},e),{},{key:t}))})),s&&en(2),!s&&Object(a.jsx)("div",{className:"sentinel-end",ref:n})]})},nn=Object(c.memo)(tn),an=n(261),cn=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",alignItems:"center",children:[Object(a.jsx)(Ne.a,{variant:"circle",height:42,width:42}),Object(a.jsx)(Ne.a,{variant:"rect",width:160,height:24,style:{marginLeft:20}})]}),Object(a.jsxs)(h.a,{mt:4,children:[Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}}),Object(a.jsx)(Ne.a,{variant:"rect",fullWidth:!0,height:24,style:{marginBottom:8}})]})]})},rn=function(){var e=Object(b.h)().announcementId,t=Object(an.a)("announcement-".concat(e),(function(){return fetch("https://sipema.herokuapp.com/b/announcement/detail/".concat(e)).then((function(e){return e.json()}))}),{refetchOnWindowFocus:!1}),n=t.isLoading,c=t.error,r=t.data;t.isFetching;return n?Object(a.jsx)(cn,{}):c?Object(a.jsx)("div",{children:"something went wrong..."}):(console.log(r),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",alignItems:"center",mb:2,children:[Object(a.jsx)(te.a,{src:r.teacher.pp}),Object(a.jsxs)("div",{style:{marginLeft:16},children:[Object(a.jsx)(O.a,{children:r.teacher.fullname}),Object(a.jsx)(O.a,{variant:"body2",color:"textSecondary",children:Ce.a.unix(r.created).format("llll")})]})]}),Object(a.jsx)(O.a,{variant:"h5",align:"center",style:{marginBottom:24},children:r.title}),Object(a.jsx)(O.a,{variant:"body1",align:"justify",children:v(r.body)})]}))},ln=n(278),sn=n(263),on=n(110),jn=n.n(on),un=n(262),bn=Object(Q.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),fontWeight:500},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}})),dn=function(e){return Object(a.jsx)(Ne.a,Object(_t.a)({variant:"rect",height:22,style:{marginTop:"8px"}},e))},hn=function(e){var t,n=e.hal_akhir,r=e.hal_awal,i=e.tanggal,l=e.type,s=(e.created,e.comment),o=(e._id,e.surat_awal),j=e.surat_akhir,u=e.ayat_awal,b=e.ayat_akhir,h=bn(),x=Object(c.useState)(!1),p=Object(d.a)(x,2),m=p[0],f=p[1];return Object(a.jsxs)(ln.a,{expanded:"panel1"===m,onChange:(t="panel1",function(e,n){f(!!n&&t)}),children:[Object(a.jsx)(un.a,{"aria-controls":"panel1bh-content",id:"panel1bh-header",expandIcon:Object(a.jsx)(jn.a,{}),children:Object(a.jsx)(O.a,{className:h.heading,children:Ce.a.unix(i).format("ll")})}),Object(a.jsxs)(sn.a,{style:{display:"block"},children:[Object(a.jsx)(O.a,{children:l===zt?"Iqra, ".concat(r," - ").concat(n):"Quran, ".concat(o,"(").concat(u,") - ").concat(j,"(").concat(b,")")}),Object(a.jsx)(O.a,{children:"Komentar:"}),Object(a.jsx)(O.a,{children:s})]})]})},On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Array(e).fill(0).map((function(e,t){return Object(a.jsx)(dn,{},t)}))},xn=function(e){Object(Dt.a)(e);var t=Object(Y.c)((function(e){return e.loginUser})),n=Object(c.useRef)(null),r=Object(Wt.a)("progress",function(){var e=Object(C.a)(T.a.mark((function e(n){var a,c,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.pageParam,c=void 0===a?0:a,e.next=3,fetch("https://sipema.herokuapp.com/b/progress/get/s/".concat(t.student_id,"/").concat(c,"/").concat(5),{headers:{token:window.localStorage.getItem("login_token")}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{refetchOnWindowFocus:!1,getNextPageParam:function(e,t){return!(e.progresses.length<5)&&t.reduce((function(e,t){return e+t.progresses.length}),0)}}),i=(r.status,r.data),l=(r.error,r.isFetching),s=r.isFetchingNextPage,o=r.fetchNextPage,j=r.hasNextPage,u=null===i||void 0===i?void 0:i.pages.reduce((function(e,t){return e.push.apply(e,Object(Ut.a)(t.progresses)),e}),[]);return Kt({target:n,onIntersect:function(){return o()},enabled:j}),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(O.a,{variant:"h6",gutterBottom:!0,children:["Riwayat Bacaan ",i&&l&&!s&&Object(a.jsx)(L.a,{size:16})]}),!i&&On(),null===u||void 0===u?void 0:u.map((function(e,t){return Object(c.createElement)(hn,Object(_t.a)(Object(_t.a)({},e),{},{key:t}))})),s&&On(2),!s&&Object(a.jsx)("div",{className:"sentinel-end",ref:n})]})},pn=Object(c.memo)(xn),mn=n(270),fn=n(265),gn=n(264),vn=n(115),yn=Object(Q.a)((function(e){return console.log(e),{inputFile:{display:"none"},header:{backgroundColor:e.palette.grey[100]},form:{"& .MuiTextField-root":{marginTop:e.spacing(3)}},mlAuto:{marginLeft:"auto"},avatarWrapper:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},avatar:{marginTop:e.spacing(4),width:e.spacing(12),height:e.spacing(12)}}}));function kn(e){var t=e.children,n=e.value,c=e.index,r=Object(Ft.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(_t.a)(Object(_t.a)({role:"tabpanel",hidden:n!==c,id:"simple-tabpanel-".concat(c),"aria-labelledby":"simple-tab-".concat(c)},r),{},{children:n===c&&Object(a.jsx)(h.a,{p:2,children:Object(a.jsx)(O.a,{children:t})})}))}var wn=function(e){var t,n=yn(),r=Object(Y.c)((function(e){return e.loginUser})),i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],o=l[1],j=Object(vn.a)(),u=j.register,b=j.handleSubmit,h=j.errors,O=j.getValues,m=Object(Y.b)(),f=Object(yt.a)((function(e){return fetch("https://sipema.herokuapp.com/b/user/profile/set",{method:"PUT",headers:{token:window.localStorage.getItem("login_token"),"Content-Type":"application/json"},body:JSON.stringify(e)})}),{onSuccess:function(e){if(e.ok){var t=Object(_t.a)(Object(_t.a)({},r),{},{fullname:O("fullname")});m(J(t)),o({type:"success",message:"Sukses mengubah profil"})}else o({type:"error",message:"Ada masalah!"})}}),g=function(){return o(null)};return Object(a.jsxs)(a.Fragment,{children:[s&&Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:s,autoHideDuration:6e3,onClose:g,children:Object(a.jsx)(N.a,{onClose:g,severity:s.type,children:s.message})}),Object(a.jsxs)("form",{onSubmit:b((function(e){f.mutate(e)})),children:[Object(a.jsxs)(Ht.a,{className:n.form,children:[Object(a.jsx)(x.a,{error:h.fullname,helperText:null===(t=h.fullname)||void 0===t?void 0:t.message,defaultValue:null===r||void 0===r?void 0:r.fullname,fullWidth:!0,name:"fullname",label:"fullname",inputRef:u({required:"Nama tidak boleh kosong"})}),Object(a.jsx)(x.a,{defaultValue:null===r||void 0===r?void 0:r.email,fullWidth:!0,disabled:!0,name:"email",label:"Disabled"})]}),Object(a.jsx)(gn.a,{disableSpacing:!0,children:Object(a.jsx)(p.a,{className:n.mlAuto,variant:"contained",color:"primary",disabled:f.isLoading,disableElevation:!0,type:"submit",children:f.isLoading?"Mengupdate data...":"Update Profile"})})]})]})},Sn=function(e){var t,n,r=yn(),i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],o=l[1],j=Object(vn.a)(),u=j.register,b=j.handleSubmit,h=j.errors,O=j.getValues,m=Object(yt.a)((function(e){return fetch("https://sipema.herokuapp.com/b/user/password/set",{method:"PUT",headers:{token:window.localStorage.getItem("login_token"),"Content-Type":"application/json"},body:JSON.stringify(e)})}),{onSuccess:function(e){e.ok?o({type:"success",message:"Sukses mengubah profil"}):o({type:"error",message:"Ada masalah!"})}}),f=function(){return o(null)};return Object(a.jsxs)(a.Fragment,{children:[s&&Object(a.jsx)(ce.a,{open:s,autoHideDuration:6e3,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:Object(a.jsx)(N.a,{onClose:f,severity:s.type,children:s.message})}),Object(a.jsxs)("form",{onSubmit:b((function(e){m.mutate({old_password:e.oldPassword,new_password:e.newPassword})})),children:[Object(a.jsxs)(Ht.a,{className:r.form,children:[Object(a.jsx)(x.a,{fullWidth:!0,name:"oldPassword",label:"Password Lama",inputRef:u,type:"password"}),Object(a.jsx)(x.a,{error:h.newPassword,helperText:null===(t=h.newPassword)||void 0===t?void 0:t.message,type:"password",fullWidth:!0,name:"newPassword",label:"Password Baru",inputRef:u({validate:{moreThanEight:function(e){return e.length>8||"Password baru harus lebih dari 8!"}}})}),Object(a.jsx)(x.a,{fullWidth:!0,name:"newPasswordRepeat",label:"Ulangi Password Baru",type:"password",error:h.newPasswordRepeat,helperText:null===(n=h.newPasswordRepeat)||void 0===n?void 0:n.message,inputRef:u({validate:{samePassword:function(e){return O("newPassword")===e||"Password tidak sama!"}}})})]}),Object(a.jsx)(gn.a,{disableSpacing:!0,children:Object(a.jsx)(p.a,{className:r.mlAuto,variant:"contained",color:"primary",disableElevation:!0,disabled:m.isLoading,type:"submit",children:m.isLoading?"Mengupdate password...":"Update Password"})})]})]})},Tn=function(e){var t=yn(),n=Object(c.useState)(0),r=Object(d.a)(n,2),i=r[0],l=r[1];return Object(a.jsxs)(Gt.a,{children:[Object(a.jsxs)("div",{className:t.header,children:[Object(a.jsx)(O.a,{variant:"h6",style:{padding:"40px 20px"},children:"Profile Setting"}),Object(a.jsxs)(mn.a,{value:i,onChange:function(e,t){l(t)},indicatorColor:"primary",textColor:"primary",centered:!0,children:[Object(a.jsx)(fn.a,{label:"Umum"}),Object(a.jsx)(fn.a,{label:"Ganti Password"})]})]}),Object(a.jsx)(kn,{value:i,index:0,children:Object(a.jsx)(wn,{})}),Object(a.jsx)(kn,{value:i,index:1,children:Object(a.jsx)(Sn,{})})]})},Cn=function(){var e=yn();return Object(a.jsx)(h.a,{className:e.avatar,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:999,children:Object(a.jsx)(L.a,{})})},An=function(e){var t=yn(),n=Object(Y.c)((function(e){return e.loginUser})),c=Object(Y.b)(),r=Object(yt.a)((function(e){return console.log(e.get("photo")),fetch("https://sipema.herokuapp.com/b/user/profile/picture/set",{method:"PUT",headers:{token:window.localStorage.getItem("login_token")},body:e})}),{onSuccess:function(e){e.ok&&e.json().then((function(e){var t=Object(_t.a)(Object(_t.a)({},n),{},{pp:e.pp});c(J(t))}))}});return Object(a.jsx)(Gt.a,{children:Object(a.jsxs)(Ht.a,{children:[Object(a.jsx)(O.a,{variant:"h4",align:"center",gutterBottom:!0,children:n.fullname}),Object(a.jsx)(O.a,{align:"center",color:"textPrimary",children:n.role}),Object(a.jsxs)("div",{className:t.avatarWrapper,children:[r.isLoading?Object(a.jsx)(Cn,{}):Object(a.jsx)(te.a,{className:t.avatar,src:n.pp}),Object(a.jsxs)(h.a,{mt:"20px",children:[Object(a.jsx)("input",{accept:"image/*",className:t.inputFile,id:"contained-button-file",type:"file",onChange:function(e){var t=new FormData,n=e.target.files[0].size/1024/1024;t.append("photo",e.target.files[0]),n<10&&r.mutate(t)}}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:Object(a.jsx)(p.a,{variant:"contained",color:"primary",disableElevation:!0,component:"span",className:t.mt4,children:"Ganti Foto Profil"})}),Object(a.jsx)(O.a,{align:"center",variant:"body2",children:"Maksimum 10Mb"})]})]}),Object(a.jsx)(h.a,{mt:"20px",children:Object(a.jsxs)(O.a,{children:["Bergabung pada: ",Object(a.jsx)("b",{children:Ce.a.unix(n.created).format("llll")})]})})]})})},En=function(e){return Object(a.jsxs)(we.a,{container:!0,spacing:4,children:[Object(a.jsx)(we.a,{item:!0,md:8,xs:12,children:Object(a.jsx)(Tn,{})}),Object(a.jsx)(we.a,{item:!0,md:4,xs:12,children:Object(a.jsx)(An,{})})]})},Pn=Object(Q.a)((function(e){return{routerWrapper:{marginLeft:"auto",marginRight:"auto",flexGrow:1},mainContainer:{display:"flex"}}})),Nn=function(){var e=Pn(),t=Object(Y.c)((function(e){return e.student})),n=Object(Y.b)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(At,{}),Object(a.jsx)(Z.a,{}),Object(a.jsxs)("div",{className:e.mainContainer,children:[Object(a.jsx)(ee.a,{smUp:!0,implementation:"css",children:Object(a.jsx)(Bt,{open:t.showSidebar,onClose:function(){return n(St())}})}),Object(a.jsx)(ee.a,{smDown:!0,implementation:"css",children:Object(a.jsx)(Bt,{open:!0,variant:"permanent"})}),Object(a.jsx)(It.a,{className:e.routerWrapper,children:Object(a.jsx)(Mt,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"/payment",children:Object(a.jsx)(qt,{})}),Object(a.jsx)(b.b,{path:"/announcement/:announcementId",children:Object(a.jsx)(rn,{})}),Object(a.jsx)(b.b,{path:"/announcement",children:Object(a.jsx)(nn,{})}),Object(a.jsx)(b.b,{path:"/progress",children:Object(a.jsx)(pn,{})}),Object(a.jsx)(b.b,{path:"/profile",children:Object(a.jsx)(En,{})}),Object(a.jsx)(b.b,{path:"/",children:Object(a.jsx)(b.a,{to:"/announcement"})})]})})})]})]})};function Bn(){var e=Object(Y.c)((function(e){return e.loginUser})),t=Object(Y.b)(),n=e.fullname,i=e.email,l=Object(c.useState)(null),s=Object(d.a)(l,2),o=s[0],j=s[1],u=Object(c.useState)(!1),b=Object(d.a)(u,2),O=b[0],m=b[1],f=r.a.createRef(),g=Object(c.useState)(null),v=Object(d.a)(g,2),y=v[0],w=v[1],S=function(){var a=f.current.value;j(null),a!==n&&(a.length<=0?j("Tidak boleh kosong."):(m(!0),function(e,t){return A("".concat(k,"b/user/profile/set"),"PUT",{"Content-Type":"application/json",token:e},{fullname:t})}(M(),a).then((function(n){n.ok?(e.fullname=a,t(J(e)),w("Berhasil mengedit profil anda.")):w("Gagal mengedit profil anda."),m(!1)}))))};return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(h.a,{mt:"50px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Nama Lengkap",placeholder:"Masukan nama lengkap anda...",defaultValue:n,error:o,helperText:o,inputRef:f,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),S())}})}),Object(a.jsx)(h.a,{mt:"30px",mb:"50px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Email",disabled:!0,value:i})}),Object(a.jsx)(h.a,{display:"flex",mb:"30px",flexDirection:"row-reverse",children:Object(a.jsx)(p.a,{color:"primary",variant:"contained",disabled:O,onClick:S,children:O?"MENGUBAH...":"UBAH"})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:y,open:y,autoHideDuration:6e3,onClose:function(){w(null)}},y)]})}function Rn(){var e=Object(c.useState)(null),t=Object(d.a)(e,2),n=t[0],i=t[1],l=Object(c.useState)(null),s=Object(d.a)(l,2),o=s[0],j=s[1],u=Object(c.useState)(null),b=Object(d.a)(u,2),O=b[0],m=b[1],f=Object(c.useState)(!1),g=Object(d.a)(f,2),v=g[0],y=g[1],w=Object(c.useState)(null),S=Object(d.a)(w,2),T=S[0],C=S[1],E=Object(c.createRef)(),P=Object(c.createRef)(),N=Object(c.createRef)(),B=function(){i(null),m(null),j(null),C(null);var e,t,n,a=E.current.value,c=P.current.value,r=N.current.value;a.length<=0?i("Tidak boleh kosong."):c.length<8?j("Panjang minimal 8 karakter."):c!==r?(j("Harus sama."),m("Harus sama.")):(y(!0),(e=M(),t=a,n=c,A("".concat(k,"b/user/password/set"),"PUT",{"Content-Type":"application/json",token:e},{old_password:t,new_password:n})).then((function(e){e.ok?C("Berhasil mengganti password."):401===e.status?C("Password/token tidak valid."):500===e.status&&C("Terjadi masalah, mohon coba lagi nanti."),y(!1)})))};return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(h.a,{mt:"50px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Password Lama",placeholder:"Masukan password lama anda...",type:"password",error:n,helperText:n,inputRef:E,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),B())}})}),Object(a.jsx)(h.a,{mt:"30px",mb:"50px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Password Baru",placeholder:"Masukan password baru anda...",type:"password",inputRef:P,error:o,helperText:o,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),B())}})}),Object(a.jsx)(h.a,{mt:"30px",mb:"50px",children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Ulangi Password Baru",placeholder:"Masukan ulang password baru anda...",type:"password",inputRef:N,error:O,helperText:O,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),B())}})}),Object(a.jsx)(h.a,{display:"flex",mb:"30px",flexDirection:"row-reverse",children:Object(a.jsx)(p.a,{color:"primary",variant:"contained",disabled:v,onClick:B,children:v?"MENGUBAH...":"UBAH"})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:T,open:T,autoHideDuration:6e3,onClose:function(){C(null)}},T)]})}var Mn=Object(Q.a)((function(e){return{pp:{height:e.spacing(15),width:e.spacing(15),fontSize:"80px"},inputContainer:{"& > *":{margin:e.spacing(1)}},input:{display:"none"},photoSizeDesc:{backgroundColor:fe.a[100]},editProfileHeader:{backgroundColor:fe.a[100]}}}));function In(){var e=Mn(),t=Object(Y.c)((function(e){return e.loginUser})),n=Object(Y.b)(),i=Object(c.useState)(!1),l=Object(d.a)(i,2),s=l[0],o=l[1],j=Object(c.useState)(null),x=Object(d.a)(j,2),f=x[0],g=x[1],v=t.fullname,y=t.role,w=t.pp,S=t.created,T=Object(c.useState)(window.location.pathname),C=Object(d.a)(T,2),A=C[0],P=C[1];return Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"Profil SIPEMA"})}),Object(a.jsx)(ke,{loginUser:t,children:Object(a.jsxs)(we.a,{container:!0,direction:"row-reverse",spacing:2,children:[Object(a.jsx)(we.a,{item:!0,xs:12,lg:4,children:Object(a.jsxs)(h.a,{component:Fe.a,p:"20px",children:[Object(a.jsx)(O.a,{variant:"h4",gutterBottom:!0,align:"center",children:v}),Object(a.jsx)(O.a,{gutterBottom:!0,align:"center",children:"teacher"===y?"Guru":"Murid"}),Object(a.jsx)(h.a,{display:"flex",width:"100%",my:"20px",children:Object(a.jsx)(h.a,{mx:"auto",children:s?Object(a.jsx)(Ne.a,{height:"120px",width:"120px",variant:"circle"}):Object(a.jsx)(te.a,{src:w,className:e.pp,children:v.charAt(0)})})}),Object(a.jsx)(h.a,{display:"flex",width:"100%",mb:"20px",children:Object(a.jsxs)(h.a,{mx:"auto",className:e.inputContainer,children:[Object(a.jsx)("input",{accept:"image/*",className:e.input,type:"file",id:"contained-button-file",onChange:function(e){var a=e.target.files[0];(a.size/1024/1024).toFixed(4)>=10?g("Ukuran foto tidak boleh melebihi 10 MB."):(o(!0),function(e,t){var n=new FormData;return n.append("photo",t),E("".concat(k,"b/user/profile/picture/set"),"PUT",{token:e},n)}(M(),a).then((function(e){e.ok?e.json().then((function(e){t.pp=e.pp,n(J(t)),o(!1),g("Berhasil mengganti foto profil.")})):(o(!1),g("Gagal mengganti foto profil."))})))}}),Object(a.jsx)("label",{htmlFor:"contained-button-file",children:Object(a.jsx)(p.a,{variant:"contained",color:"primary",component:"span",children:"GANTI FOTO PROFIL"})})]})}),Object(a.jsx)(h.a,{p:"10px",className:e.photoSizeDesc,mb:"20px",children:Object(a.jsxs)(O.a,{align:"center",children:["Ukuran foto maksimum: ",Object(a.jsx)("b",{children:"10 MB"})]})}),Object(a.jsx)(h.a,{mb:"20px",children:Object(a.jsxs)(O.a,{children:["Bergabung pada: ",Object(a.jsx)("b",{children:Ce.a.unix(S).format("llll")})]})})]})}),Object(a.jsx)(we.a,{item:!0,xs:12,lg:8,children:Object(a.jsxs)(h.a,{component:Fe.a,children:[Object(a.jsxs)(h.a,{px:"20px",className:e.editProfileHeader,children:[Object(a.jsx)(h.a,{py:"40px",children:Object(a.jsx)(O.a,{variant:"h4",children:"Edit Profil"})}),Object(a.jsxs)(mn.a,{indicatorColor:"primary",value:A,onChange:function(e,t){P(t)},children:[Object(a.jsx)(fn.a,{label:"Umum",component:u.b,to:"/profile",value:"/profile"}),Object(a.jsx)(fn.a,{label:"Ganti Password",component:u.b,to:"/profile/password",value:"/profile/password"})]})]}),Object(a.jsx)(h.a,{p:"20px",children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"/profile/password",children:Object(a.jsx)(Rn,{})}),Object(a.jsx)(b.b,{path:"/profile",children:Object(a.jsx)(Bn,{})})]})})]})})]})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:f,open:f,autoHideDuration:6e3,onClose:function(){g(null)}},f)]})}var Un=Object(Q.a)((function(e){return{avatar:{height:e.spacing(5),width:e.spacing(5),marginRight:"10px",marginTop:"auto",marginBottom:"auto"}}}));function Dn(e){for(var t=Un(),n=e.paragraphsCount,r=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(Ne.a,{width:"100%"}),Object(a.jsx)(Ne.a,{width:"100%"}),Object(a.jsx)(Ne.a,{width:"100%"}),Object(a.jsx)(Ne.a,{width:"100%"}),Object(a.jsx)(Ne.a,{width:"80%"}),Object(a.jsx)(h.a,{mb:"32px"})]}),i=[],l=0;l<n;l++)i.push(r);return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsx)(Ne.a,{variant:"circle",className:t.avatar}),Object(a.jsxs)(h.a,{my:"auto",children:[Object(a.jsx)(Ne.a,{width:"150px"}),Object(a.jsx)(Ne.a,{width:"100px"})]})]}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(oe.a,{})}),Object(a.jsxs)(h.a,{display:"flex",flexDirection:"column",children:[Object(a.jsx)(h.a,{mx:"auto",mb:"40px",children:Object(a.jsx)(Ne.a,{width:"200px",height:"32px"})}),i]})]})}var _n=Object(Q.a)((function(e){return{avatar:{height:e.spacing(5),width:e.spacing(5),marginRight:"10px",marginTop:"auto",marginBottom:"auto"},greyColor:{color:"grey"}}}));function Fn(){var e=_n(),t=Object(b.h)().announcementId,n=Object(Y.c)((function(e){return e.loginUser})),r=Object(c.useState)(null),i=Object(d.a)(r,2),l=i[0],s=i[1],o=Object(c.useState)("Pengumuman"),j=Object(d.a)(o,2),u=j[0],x=j[1],f=Object(c.useState)(!0),g=Object(d.a)(f,2),y=g[0],w=g[1],S=Object(c.useState)(null),A=Object(d.a)(S,2),P=A[0],N=A[1],B=Object(c.useState)(!1),R=Object(d.a)(B,2),I=R[0],U=R[1],D=Object(c.useState)(null),_=Object(d.a)(D,2),F=_[0],G=_[1],H=Object(c.useState)(!1),L=Object(d.a)(H,2),z=L[0],K=L[1],V=Object(a.jsx)(h.a,{minHeight:"70vh",display:"flex",alignItems:"center",justifyContent:"center",children:Object(a.jsx)(O.a,{variant:"h5",children:"Pengumuman tidak ditemukan."})}),J=null;if(l){var q=l.teacher,X=q.pp,Q=q.fullname,$=l.created,Z=l.title,ee=l.body,re=l.is_owner;J=Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",children:[Object(a.jsxs)(h.a,{display:"flex",width:"90%",children:[Object(a.jsx)(te.a,{src:X,className:e.avatar,children:Q.charAt(0)}),Object(a.jsxs)(h.a,{my:"auto",children:[Object(a.jsx)(O.a,{variant:"h6",children:Q}),Object(a.jsx)(O.a,{className:e.greyColor,children:Ce.a.unix($).format("llll")})]})]}),re?Object(a.jsxs)(h.a,{display:"flex",width:"10%",flexDirection:"row-reverse",children:[Object(a.jsx)(h.a,{my:"auto",children:Object(a.jsx)(W.a,{size:"small",onClick:function(e){N(e.currentTarget)},children:Object(a.jsx)(nt.a,{})})}),Object(a.jsxs)(ne.a,{open:P,anchorEl:P,onClose:function(){N(null)},children:[Object(a.jsx)(ae.a,{component:p.a,onClick:function(){K(!0),N(null)},children:"EDIT"}),Object(a.jsx)(ae.a,{component:p.a,disabled:I,onClick:function(){U(!0),Ze(t,M()).then((function(e){e.ok?(s(null),G("Berhasil menghapus pengumuman")):(G("Gagal menghapus pengumuman"),U(!1))}))},children:I?"MENGHAPUS...":"HAPUS"})]})]}):null]}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(oe.a,{})}),Object(a.jsxs)(h.a,{display:"flex",flexDirection:"column",mb:"50px",children:[Object(a.jsx)(h.a,{mb:"40px",children:Object(a.jsx)(O.a,{variant:"h5",align:"center",children:Z})}),Object(a.jsx)(O.a,{align:"justify",children:v(ee)})]}),Object(a.jsx)(Ve.a,{open:z,onClose:function(){K(!1)},fullWidth:!0,children:Object(a.jsx)(Xe,{defaultTitle:l.title,defaultBody:l.body,headerTitle:"Mengedit Pengumuman",btnName:{normal:"EDIT",loading:"MENGEDIT..."},handleSubmit:function(){var e=Object(C.a)(T.a.mark((function e(n,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(t,n,a,M()).then((function(e){if(e.ok){G("Berhasil mengedit pengumuman."),K(!1);var t=Object(_t.a)({},l);return t.title=n,t.body=a,s(t),!0}return G("Gagal mengedit pengumuman."),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})})]})}return Object(c.useEffect)((function(){(function(e,t){return E("".concat(k,"b/announcement/detail/").concat(e),"GET",{token:t})})(t,M()).then((function(e){e.ok?e.json().then((function(e){s(e),x(e.title),w(!1)})):w(!1)}))}),[t]),Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:u})}),Object(a.jsx)(ke,{loginUser:n,children:y?Object(a.jsx)(Dn,{paragraphsCount:3}):l?J:V}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:F,open:F,autoHideDuration:6e3,onClose:function(){G(null)}},F)]})}function Wn(e){for(var t=e.number,n=[],r=0;r<t;r++)n.push(Object(a.jsx)(h.a,{mb:"20px",children:Object(a.jsx)(Ne.a,{width:"100%",height:"75px",variant:"rect"})}));return Object(a.jsx)(c.Fragment,{children:n})}var Gn=Object(Q.a)((function(e){return{header:{backgroundColor:fe.a[100]},avatar:{height:e.spacing(10),width:e.spacing(10)}}}));function Hn(e){var t=Gn(),n=e.tabs,c=window.location.pathname,r=e.number;return Object(a.jsxs)(h.a,{component:Fe.a,elevation:3,overflow:"hidden",children:[Object(a.jsx)(h.a,{pt:"20px",px:"20px",display:"flex",width:"100%",className:t.header,mb:"20px",flexDirection:"column",children:Object(a.jsxs)(h.a,{mx:"auto",display:"flex",flexDirection:"column",children:[Object(a.jsx)(h.a,{mb:"20px",mx:"auto",children:Object(a.jsx)(Ne.a,{variant:"circle",className:t.avatar})}),Object(a.jsx)(h.a,{mx:"auto",mb:"10px",children:Object(a.jsx)(Ne.a,{width:"200px",height:"32px"})}),Object(a.jsx)(h.a,{mx:"auto",mb:"10px",children:Object(a.jsx)(Ne.a,{width:"160px",height:"24px"})}),Object(a.jsx)(h.a,{mx:"auto",mb:"10px",children:Object(a.jsx)(Ne.a,{width:"100px",height:"24px"})}),Object(a.jsx)(h.a,{mx:"auto",mb:"10px",children:Object(a.jsx)(Ne.a,{width:"280px",height:"24px"})}),Object(a.jsx)(mn.a,{value:c,indicatorColor:"primary",centered:!0,children:n.map((function(e){return Object(a.jsx)(fn.a,{label:e.label,value:e.url,component:u.b,to:e.url})}))})]})}),Object(a.jsx)(h.a,{px:{lg:"25%"},children:Object(a.jsx)(Wn,{number:r})})]})}var Ln=Object(Q.a)((function(e){return{header:{backgroundColor:fe.a[100]},avatar:{height:e.spacing(10),width:e.spacing(10)}}}));function zn(e){var t=Ln(),n=e.student,c=n.fullname,r=n.email,i=n.created,l=n.pp,s=e.tabs,o=window.location.pathname;return Object(a.jsxs)(h.a,{component:Fe.a,elevation:3,overflow:"hidden",mb:"20px",children:[Object(a.jsx)(h.a,{pt:"20px",px:"20px",display:"flex",width:"100%",className:t.header,mb:"20px",flexDirection:"column",children:Object(a.jsxs)(h.a,{mx:"auto",display:"flex",flexDirection:"column",children:[Object(a.jsx)(h.a,{mb:"20px",mx:"auto",children:Object(a.jsx)(te.a,{src:l,className:t.avatar,children:c.charAt(0)})}),Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:c}),Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:r}),Object(a.jsx)(O.a,{align:"center",gutterBottom:!0,children:"Murid"}),Object(a.jsxs)(O.a,{align:"center",gutterBottom:!0,children:["Bergabung pada ",Object(a.jsx)("b",{children:Ce.a.unix(i).format("llll")})]}),Object(a.jsx)(mn.a,{value:o,indicatorColor:"primary",centered:!0,children:s.map((function(e){return Object(a.jsx)(fn.a,{label:e.label,value:e.url,component:u.b,to:e.url})}))})]})}),Object(a.jsx)(h.a,{px:{lg:"25%"},children:e.children})]})}function Kn(e){var t=e.headerTitle,n=e.defaultAmount,r=e.defaultDate,i=e.onSubmit,l=e.btnTitle,s=Object(c.createRef)(),o=Object(c.createRef)(),j=Object(c.useState)(null),u=Object(d.a)(j,2),b=u[0],m=u[1],f=Object(c.useState)(null),g=Object(d.a)(f,2),v=g[0],y=g[1],k=Object(c.useState)(!1),w=Object(d.a)(k,2),S=w[0],T=w[1],C=function(){var e=s.current.value,t=o.current.value;if(m(null),y(null),e.length<=0)m("Tidak boleh kosong");else if(Number(e)<=0)m("Tidak boleh di bawah 0");else if(t.length<=0)y("Tidak boleh kosong");else{T(!0);var n=Ce()(t).unix();i(e,n).then((function(e){e||T(!1)}))}};return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(Ye.a,{children:t}),Object(a.jsxs)(Je.a,{children:[Object(a.jsx)(x.a,{inputRef:s,error:b,helperText:b,label:"Nominal",placeholder:"Masukan nominal...",defaultValue:n,type:"number",fullWidth:!0,onKeyUp:function(e){13===e.keyCode&&(e.preventDefault(),C())}}),Object(a.jsx)(h.a,{my:"40px"}),Object(a.jsx)(O.a,{gutterBottom:!0,children:"Tanggal Pembayaran:"}),Object(a.jsx)(x.a,{inputRef:o,error:v,helperText:v,defaultValue:Ce.a.unix(r).format("YYYY-MM-DD"),type:"date",fullWidth:!0})]}),Object(a.jsx)(qe.a,{children:Object(a.jsx)(p.a,{color:"primary",onClick:C,disabled:S,children:S?l.loading:l.normal})})]})}function Vn(e){var t=Object(c.useState)(e.tanggal),n=Object(d.a)(t,2),r=n[0],i=n[1],l=Object(c.useState)(e.amount),s=Object(d.a)(l,2),o=s[0],j=s[1],u=e.onDelete,b=e.onEdit,x=Object(c.useState)(null),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)(!1),k=Object(d.a)(v,2),w=k[0],S=k[1],A=Object(c.useState)(!1),E=Object(d.a)(A,2),P=E[0],N=E[1];return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(h.a,{component:Fe.a,py:"20px",px:"5px",display:"flex",variant:"outlined",square:!0,children:[Object(a.jsxs)(h.a,{flex:1,children:[Object(a.jsx)(O.a,{gutterBottom:!0,children:Object(a.jsx)("b",{children:Ce.a.unix(r).format("ll")})}),Object(a.jsx)(O.a,{gutterBottom:!0,children:Object(a.jsxs)("b",{children:["Rp",y(o)]})})]}),u&&b?Object(a.jsxs)(h.a,{children:[Object(a.jsx)(W.a,{onClick:function(e){g(e.currentTarget)},size:"small",children:Object(a.jsx)(nt.a,{})}),Object(a.jsxs)(ne.a,{open:f,anchorEl:f,onClose:function(){g(null)},children:[Object(a.jsx)(ae.a,{onClick:function(){g(null),N(!0)},children:"Edit"}),Object(a.jsx)(ae.a,{component:p.a,onClick:function(){S(!0),u().then((function(e){e||S(!1)}))},disabled:w,children:w?"MENGHAPUS...":"HAPUS"})]})]}):null]}),Object(a.jsx)(Ve.a,{open:P,onClose:function(){N(!1)},fullWidth:!0,children:Object(a.jsx)(Kn,{headerTitle:"Edit Riwayat Pembayaran Murid",btnTitle:{normal:"EDIT",loading:"MENGEDIT..."},onSubmit:function(){var e=Object(C.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,n).then((function(e){return!!e&&(j(t),i(n),N(!1),!0)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),defaultAmount:o,defaultDate:r})})]})}var Yn=Object(Q.a)((function(e){var t;return{fab:(t={position:"fixed"},Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(1),bottom:e.spacing(1)}),Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(2),bottom:e.spacing(2)}),t)}}));function Jn(){for(var e=Yn(),t=Object(b.h)().studentId,n=Object(c.useState)(!0),r=Object(d.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)([]),o=Object(d.a)(s,2),j=o[0],u=o[1],x=Object(c.useState)(!1),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)(!1),y=Object(d.a)(v,2),w=y[0],S=y[1],A=Object(c.useState)(null),P=Object(d.a)(A,2),N=P[0],B=P[1],R=[],I=0;I<5;I++)R.push(Object(a.jsx)(h.a,{mb:"20px",children:Object(a.jsx)(Ne.a,{variant:"rect",height:"80px",width:"100%"})}));return Object(c.useEffect)((function(){Ot(M(),t,0,5).then((function(e){e.ok?e.json().then((function(e){var t=e.payments,n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)}))}),[t]),Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",flexDirection:"column",width:"100%",minHeight:"50vh",children:[j.map((function(e){var n=e._id,c=e.amount,r=e.tanggal;return Object(a.jsx)(h.a,{mb:"10px",children:Object(a.jsx)(Vn,{amount:c,tanggal:r,onDelete:Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(a=M(),c=n,E("".concat(k,"b/payment/delete/").concat(c),"DELETE",{token:a})).then((function(e){return e.ok?(B("Berhasil menghapus."),l(!0),Ot(M(),t,0,j.length+1).then((function(e){e.ok?e.json().then((function(e){var t=e.count,n=e.payments;g(n.length<t),u(n),l(!1)})):l(!1)})),u([]),!0):(B("Gagal menghapus."),!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var a,c}),e)}))),onEdit:function(){var e=Object(C.a)(T.a.mark((function e(t,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt(M(),n,t,a).then((function(e){return e.ok?(B("Berhasil mengedit"),!0):(B("Gagal mengedit"),!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},n)})})),i?R:f?Object(a.jsx)(h.a,{width:"100%",py:"20px",display:"flex",alignContent:"center",justifyContent:"center",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){l(!0),Ot(M(),t,j.length,5).then((function(e){e.ok?e.json().then((function(e){var t=j.slice().concat(e.payments),n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)}))},children:"MUAT LEBIH BANYAK"})}):j.length<=0?Object(a.jsx)(h.a,{m:"auto",children:Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:"KOSONG"})}):null]}),Object(a.jsx)(Ke.a,{color:"primary",size:"small",className:e.fab,onClick:function(){S(!0)},children:Object(a.jsx)(ze.a,{})}),Object(a.jsx)(Ve.a,{open:w,onClose:function(){S(!1)},fullWidth:!0,children:Object(a.jsx)(Kn,{headerTitle:"Tambah Riwayat Pembayaran Murid",btnTitle:{normal:"BUAT",loading:"MEMBUAT..."},onSubmit:function(){var e=Object(C.a)(T.a.mark((function e(n,a){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt(M(),t,n,a).then((function(e){if(e.ok){S(!1),l(!0),u([]),B("Berhasil membuat pembayaran");var n=j.length+1;return Ot(M(),t,0,n).then((function(e){e.ok?e.json().then((function(e){var t=e.payments,n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)})),!0}return B("Gagal membuat pembayaran"),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:N,open:N,autoHideDuration:3e3,onClose:function(){B(null)}},N)]})}var qn=function(e,t,n,a){return E("".concat(k,"b/progress/get/s/").concat(t,"/").concat(n,"/").concat(a),"GET",{token:e})},Xn=function(e,t,n){return A("".concat(k,"b/progress/create/s/").concat(t),"POST",{token:e,"Content-Type":"application/json"},n)},Qn=n(280),$n=n(272);function Zn(e){var t=e.halAwalDefaultValue,n=e.halAkhirDefaultValue,c=e.halAwalRef,r=e.halAkhirRef,i=e.halAwalErr,l=e.halAkhirErr,s=e.disabled;return Object(a.jsxs)(we.a,{container:!0,spacing:2,children:[Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Halaman Awal",error:i,helperText:i,inputRef:c,defaultValue:t||0,type:"number",disabled:s})}),Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{fullWidth:!0,label:"Halaman Akhir",error:l,helperText:l,inputRef:r,defaultValue:n||0,type:"number",disabled:s})})]})}var ea=Object(Q.a)((function(){return{greyColor:{color:"grey"}}}));function ta(e){var t=ea(),n=e.text;return Object(a.jsxs)(h.a,{display:"flex",alignContent:"center",children:[Object(a.jsx)(h.a,{flex:1,my:"auto",children:Object(a.jsx)(oe.a,{})}),Object(a.jsx)(h.a,{mx:"5px",children:Object(a.jsx)(O.a,{className:t.greyColor,children:n})}),Object(a.jsx)(h.a,{flex:1,my:"auto",children:Object(a.jsx)(oe.a,{})})]})}function na(e){var t=e.disabled,n=e.defaultSuratAwal,r=e.defaultSuratAkhir,i=e.defaultAyatAwal,l=e.defaultAyatAkhir,s=e.suratAwalErr,o=e.suratAwalErr,j=e.ayatAwalErr,u=e.ayatAkhirErr,b=e.suratAwalRef,d=e.suratAkhirRef,O=e.ayatAwalRef,p=e.ayatAkhirRef;return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(ta,{text:"Awal"})}),Object(a.jsxs)(we.a,{container:!0,spacing:2,children:[Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{label:"Surat",placeholder:"Masukan surat awal...",inputRef:b,error:s,helperText:s,disabled:t,defaultValue:n,fullWidth:!0})}),Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{label:"Ayat",placeholder:"Masukan ayat awal...",inputRef:O,error:j,helperText:j,disabled:t,defaultValue:i||0,fullWidth:!0})})]}),Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(ta,{text:"Akhir"})}),Object(a.jsxs)(we.a,{container:!0,spacing:2,children:[Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{label:"Surat",placeholder:"Masukan surat akhir...",inputRef:d,error:o,helperText:o,disabled:t,defaultValue:r,fullWidth:!0})}),Object(a.jsx)(we.a,{item:!0,xs:12,sm:6,children:Object(a.jsx)(x.a,{label:"Ayat",placeholder:"Masukan ayat akhir...",inputRef:p,error:u,helperText:u,disabled:t,defaultValue:l||0,fullWidth:!0})})]})]})}function aa(e){var t=e.headerTitle,n=e.btnTitle,r=e.onSubmit,i=e.defaultType,l=e.defaultHalAwal,s=e.defaultHalAkhir,o=e.defaultSuratAwal,j=e.defaultSuratAkhir,u=e.defaultAyatAwal,b=e.defaultAyatAkhir,O=e.defaultComment,m=e.defaultTanggal,f=Object(c.createRef)(),g=Object(c.createRef)(),v=Object(c.createRef)(),y=Object(c.createRef)(),k=Object(c.createRef)(),w=Object(c.createRef)(),S=Object(c.createRef)(),T=Object(c.createRef)(),C=Object(c.useState)(!1),A=Object(d.a)(C,2),E=A[0],P=A[1],N=Object(c.useState)(i||zt),B=Object(d.a)(N,2),R=B[0],M=B[1],I=Object(c.useState)(null),U=Object(d.a)(I,2),D=U[0],_=U[1],F=Object(c.useState)(null),W=Object(d.a)(F,2),G=W[0],H=W[1],L=Object(c.useState)(null),z=Object(d.a)(L,2),K=z[0],V=z[1],Y=Object(c.useState)(null),J=Object(d.a)(Y,2),q=J[0],X=J[1],Q=Object(c.useState)(null),$=Object(d.a)(Q,2),Z=$[0],ee=$[1],te=Object(c.useState)(null),ne=Object(d.a)(te,2),ce=ne[0],re=ne[1],ie=Object(c.useState)(null),le=Object(d.a)(ie,2),se=le[0],oe=le[1];return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsx)(Ye.a,{children:t}),Object(a.jsxs)(Je.a,{children:[Object(a.jsxs)(h.a,{mb:"20px",width:{xs:"100%",sm:"50%"},children:[Object(a.jsx)(Qn.a,{id:"type",children:"Tipe"}),Object(a.jsxs)($n.a,{value:R,onChange:function(e){M(e.target.value)},fullWidth:!0,id:"type",disabled:E,children:[Object(a.jsx)(ae.a,{value:zt,children:"Iqra"}),Object(a.jsx)(ae.a,{value:Lt,children:"Quran"})]})]}),R===zt?Object(a.jsx)(Zn,{halAwalDefaultValue:l,halAkhirDefaultValue:s,halAwalRef:f,halAkhirRef:g,halAwalErr:D,halAkhirErr:G,disabled:E}):R===Lt?Object(a.jsx)(na,{disabled:E,defaultSuratAwal:o,defaultSuratAkhir:j,defaultAyatAwal:u,defaultAyatAkhir:b,suratAwalErr:K,suratAkhirErr:q,ayatAwalErr:Z,ayatAkhirErr:ce,suratAwalRef:v,suratAkhirRef:y,ayatAwalRef:k,ayatAkhirRef:w}):null,Object(a.jsx)(h.a,{my:"20px",children:Object(a.jsx)(x.a,{inputRef:S,defaultValue:O,label:"Komentar",placeholder:"Beri komentar atas bacaan murid anda...",fullWidth:!0,multiline:!0,disabled:E})}),Object(a.jsxs)(h.a,{my:"20px",children:[Object(a.jsx)(Qn.a,{id:"type",children:"Tanggal Baca"}),Object(a.jsx)(x.a,{inputRef:T,defaultValue:Ce.a.unix(m).format("YYYY-MM-DD"),error:se,helperText:se,fullWidth:!0,type:"date",id:"tanggal",disabled:E})]})]}),Object(a.jsx)(qe.a,{children:Object(a.jsx)(p.a,{color:"primary",disabled:E,onClick:function(){_(null),H(null),V(null),X(null),ee(null),re(null),oe(null);var e=void 0,t=void 0,n=void 0,a=void 0,c=void 0,i=void 0,l=S.current.value,s=T.current.value,o=!1;if(R===zt){e=f.current.value,t=g.current.value;var j=Number(e),u=Number(t);e.length<=0&&(_("Tidak boleh kosong"),o=!0),t.length<=0&&(H("Tidak boleh kosong"),o=!0),j<0&&(_("Tidak boleh negatif"),o=!0),u<0&&(H("Tidak boleh negatif"),o=!0),j>u&&(_("Tidak boleh lebih besar daripada halaman akhir"),H("Tidak boleh lebih kecil daripada halaman awal"),o=!0)}else{n=v.current.value,a=y.current.value,c=k.current.value,i=w.current.value;var b=Number(c),d=Number(i);c.length<=0&&(ee("Tidak boleh kosong"),o=!0),i.length<=0&&(re("Tidak boleh kosong"),o=!0),n.length<=0&&(V("Tidak boleh kosong"),o=!0),a.length<=0&&(X("Tidak boleh kosong"),o=!0),b<0&&(ee("Tidak boleh negatif"),o=!0),d<0&&(re("Tidak boleh negatif"),o=!0)}if(s.length<=0&&(oe("Tidak boleh kosong"),o=!0),!o){var h=Ce()(s).unix();P(!0),r(R,e,t,n,a,c,i,l,h).then((function(e){e||P(!1)}))}},children:E?n.loading:n.normal})})]})}var ca=Object(Q.a)((function(){return{summary:{backgroundColor:fe.a[50]}}}));function ra(e){var t=ca(),n=Object(c.useState)(e.tanggal),r=Object(d.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)(e.tipe),o=Object(d.a)(s,2),j=o[0],u=o[1],b=Object(c.useState)(e.halAwal),x=Object(d.a)(b,2),m=x[0],f=x[1],g=Object(c.useState)(e.halAkhir),y=Object(d.a)(g,2),k=y[0],w=y[1],S=Object(c.useState)(e.suratAwal),A=Object(d.a)(S,2),E=A[0],P=A[1],N=Object(c.useState)(e.suratAkhir),B=Object(d.a)(N,2),R=B[0],M=B[1],I=Object(c.useState)(e.ayatAwal),U=Object(d.a)(I,2),D=U[0],_=U[1],F=Object(c.useState)(e.ayatAkhir),G=Object(d.a)(F,2),H=G[0],L=G[1],z=Object(c.useState)(e.comment),K=Object(d.a)(z,2),V=K[0],Y=K[1],J=e.onDelete,q=e.onEdit,X=Object(c.useState)(!1),Q=Object(d.a)(X,2),$=Q[0],Z=Q[1],ee=Object(c.useState)(null),te=Object(d.a)(ee,2),ce=te[0],re=te[1],ie=Object(c.useState)(!1),le=Object(d.a)(ie,2),se=le[0],oe=le[1];return Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(ln.a,{square:!0,variant:"outlined",children:[Object(a.jsxs)(un.a,{className:t.summary,children:[Object(a.jsx)(h.a,{flex:1,children:Object(a.jsx)(O.a,{children:Ce.a.unix(i).format("ll")})}),J&&q?Object(a.jsxs)(h.a,{children:[Object(a.jsx)(W.a,{size:"small",onClick:function(e){e.stopPropagation(),re(e.currentTarget)},children:Object(a.jsx)(nt.a,{})}),Object(a.jsxs)(ne.a,{anchorEl:ce,open:ce,onClose:function(e){e.stopPropagation(),re(null)},onClick:function(e){e.stopPropagation()},children:[Object(a.jsx)(ae.a,{onClick:function(){Z(!0),re(null)},children:"Edit"}),Object(a.jsx)(ae.a,{component:p.a,disabled:se,onClick:function(){oe(!0),J().then((function(e){e||oe(!1)}))},children:se?"MENGHAPUS...":"HAPUS"})]})]}):null]}),Object(a.jsx)(sn.a,{children:Object(a.jsxs)(h.a,{children:[Object(a.jsx)(O.a,{gutterBottom:!0,children:j===zt?"Iqra, ".concat(m," - ").concat(k):"Quran, ".concat(E,"(").concat(D,") - ").concat(R,"(").concat(H,")")}),Object(a.jsx)(O.a,{children:"Komentar:"}),Object(a.jsx)(O.a,{children:V?v(V):"Tidak ada komentar."})]})})]}),Object(a.jsx)(Ve.a,{open:$,onClose:function(){Z(!1)},children:Object(a.jsx)(aa,{headerTitle:"Edit Riwayat Bacaan",btnTitle:{normal:"EDIT",loading:"MENGEDIT..."},onSubmit:function(){var e=Object(C.a)(T.a.mark((function e(t,n,a,c,r,i,s,o,j){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,n,a,c,r,i,s,o,j).then((function(e){return!!e&&(u(t),f(n),w(a),P(c),M(r),_(i),L(s),Y(o),l(j),Z(!1),!0)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,i,l,s,o){return e.apply(this,arguments)}}(),defaultType:j,defaultHalAwal:m,defaultHalAkhir:k,defaultSuratAwal:E,defaultSuratAkhir:R,defaultAyatAwal:D,defaultAyatAkhir:H,defaultComment:V,defaultTanggal:i})})]})}var ia=Object(Q.a)((function(e){var t;return{fab:(t={position:"fixed"},Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(1),bottom:e.spacing(1)}),Object(Le.a)(t,e.breakpoints.up("xs"),{right:e.spacing(2),bottom:e.spacing(2)}),t)}}));function la(){for(var e=ia(),t=Object(b.h)().studentId,n=Object(c.useState)(!0),r=Object(d.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)([]),o=Object(d.a)(s,2),j=o[0],u=o[1],x=Object(c.useState)(!1),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)(!1),y=Object(d.a)(v,2),w=y[0],S=y[1],E=Object(c.useState)(null),P=Object(d.a)(E,2),N=P[0],B=P[1],R=[],I=0;I<5;I++)R.push(Object(a.jsx)(h.a,{mb:"20px",children:Object(a.jsx)(Ne.a,{variant:"rect",height:"80px",width:"100%"})}));return Object(c.useEffect)((function(){qn(M(),t,0,5).then((function(e){e.ok?e.json().then((function(e){var t=e.progresses,n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)}))}),[t]),Object(a.jsxs)(c.Fragment,{children:[Object(a.jsxs)(h.a,{display:"flex",flexDirection:"column",width:"100%",minHeight:"50vh",children:[j.map((function(e){var n=e._id,c=e.hal_awal,r=e.hal_akhir,i=e.surat_awal,s=e.surat_akhir,o=e.ayat_awal,b=e.ayat_akhir,d=e.comment,O=e.tanggal,x=e.type;return Object(a.jsx)(h.a,{mb:"10px",children:Object(a.jsx)(ra,{halAwal:c,halAkhir:r,suratAwal:i,suratAkhir:s,ayatAwal:o,ayatAkhir:b,comment:d,tanggal:O,tipe:x,onDelete:Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(a=M(),c=n,A("".concat(k,"b/progress/delete/").concat(c),"DELETE",{token:a})).then((function(e){if(e.ok){var n=j.length;return B("Berhasil menghapus"),l(!0),u([]),qn(M(),t,0,n).then((function(e){e.ok?e.json().then((function(e){var t=e.progresses,n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)})),!0}return B("Gagal menghapus"),!1})));case 1:case"end":return e.stop()}var a,c}),e)}))),onEdit:function(){var e=Object(C.a)(T.a.mark((function e(t,a,c,r,i,l,s,o,j){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(u=M(),b=n,d={type:t,hal_awal:a,hal_akhir:c,surat_awal:r,surat_akhir:i,ayat_awal:l,ayat_akhir:s,comment:o,tanggal:j},A("".concat(k,"b/progress/edit/").concat(b),"PUT",{token:u,"Content-Type":"application/json"},d)).then((function(e){return e.ok?(B("Berhasil mengedit riwayat bacaan"),!0):(B("Gagal mengedit riwayat bacaan"),!1)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}var u,b,d}),e)})));return function(t,n,a,c,r,i,l,s,o){return e.apply(this,arguments)}}()},n)})})),i?R:f?Object(a.jsx)(h.a,{width:"100%",py:"20px",display:"flex",alignContent:"center",justifyContent:"center",children:Object(a.jsx)(p.a,{color:"primary",onClick:function(){l(!0),qn(M(),t,j.length,5).then((function(e){e.ok?e.json().then((function(e){var t=j.slice().concat(e.progresses),n=e.count;g(t.length<n),u(t),l(!1)})):l(!1)}))},children:"MUAT LEBIH BANYAK"})}):j.length<=0?Object(a.jsx)(h.a,{m:"auto",children:Object(a.jsx)(O.a,{variant:"h6",align:"center",gutterBottom:!0,children:"KOSONG"})}):null]}),Object(a.jsx)(Ke.a,{color:"primary",size:"small",className:e.fab,onClick:function(){S(!0)},children:Object(a.jsx)(ze.a,{})}),Object(a.jsx)(Ve.a,{open:w,onClose:function(){S(!1)},fullWidth:!0,children:Object(a.jsx)(aa,{headerTitle:"Tambah Riwayat Bacaan Murid",btnTitle:{normal:"BUAT",loading:"MEMBUAT..."},onSubmit:function(){var e=Object(C.a)(T.a.mark((function e(n,a,c,r,i,s,o,b,d){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(M(),t,{type:n,hal_awal:Number(a),hal_akhir:Number(c),surat_awal:r,surat_akhir:i,ayat_awal:Number(s),ayat_akhir:Number(o),comment:b,tanggal:d}).then((function(e){if(e.ok){B("Berhasil menambahkan"),S(!1),l(!0);var n=j.length+1;return u([]),qn(M(),t,0,n).then((function(e){e.ok?e.json().then((function(e){var t=e.count,n=e.progresses;g(n.length<t),u(n),l(!1)})):l(!1)})),!0}return B("Gagal menambahkan"),!1}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,i,l,s,o){return e.apply(this,arguments)}}()})}),Object(a.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},message:N,open:N,autoHideDuration:3e3,onClose:function(){B(null)}},N)]})}function sa(){var e=Object(Y.c)((function(e){return e.loginUser})),t=Object(b.h)().studentId,n=Object(c.useState)(null),r=Object(d.a)(n,2),i=r[0],l=r[1],s=Object(c.useState)(!0),o=Object(d.a)(s,2),j=o[0],u=o[1];return Object(c.useEffect)((function(){(function(e,t){return E("".concat(k,"b/student/get/").concat(e),"GET",{token:t})})(t,M()).then((function(e){e.ok?e.json().then((function(e){l(e),u(!1)})):u(!1)}))}),[t]),Object(a.jsx)(ke,{loginUser:e,children:j?Object(a.jsx)(Hn,{tabs:[{label:"Bacaan",url:"/s/".concat(t)},{label:"Pembayaran",url:"/s/".concat(t,"/pembayaran")}],number:5}):i?Object(a.jsx)(zn,{student:i,tabs:[{label:"Bacaan",url:"/s/".concat(t)},{label:"Pembayaran",url:"/s/".concat(t,"/pembayaran")}],children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"/s/:studentId/pembayaran",children:Object(a.jsx)(Jn,{})}),Object(a.jsx)(b.b,{path:"/s/:studentId",children:Object(a.jsx)(la,{})})]})}):Object(a.jsx)(h.a,{height:"70vh",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",children:Object(a.jsx)(O.a,{variant:"h5",children:"Murid tidak ada."})})})}function oa(){var e=Object(b.g)(),t=Object(Y.b)(),n=Object(Y.c)((function(e){return e.loginUser})),i=Object(c.useState)(!0),l=Object(d.a)(i,2),s=l[0],o=l[1];if(Object(c.useEffect)((function(){if(null===n){var a=M();null===a?e.push("/login"):(o(!0),function(e){return E("".concat(k,"b/user/profile"),"GET",{token:e})}(a).then((function(n){n.ok?n.json().then((function(e){t(J(e)),o(!1)})):e.push("/login")})))}}),[n,t,e]),s)return Object(a.jsx)(z,{});var j=null;return"student"===n.role?j=n.approved_student?[Object(a.jsx)(b.b,{path:"/",children:Object(a.jsx)(Nn,{})})]:Object(a.jsx)(b.b,{path:"/",children:Object(a.jsx)(q,{})}):"teacher"===n.role&&(j=[Object(a.jsx)(b.b,{path:"/a/:announcementId",children:Object(a.jsx)(Fn,{})}),Object(a.jsx)(b.b,{path:"/s/:studentId",children:Object(a.jsx)(sa,{})}),Object(a.jsx)(b.b,{path:"/students",children:Object(a.jsx)(dt,{})}),Object(a.jsx)(b.b,{path:"/payment",children:Object(a.jsx)(ft,{})}),Object(a.jsx)(b.b,{path:"/log",children:Object(a.jsx)(He,{})}),Object(a.jsx)(b.b,{path:"/profile",children:Object(a.jsx)(In,{})}),Object(a.jsx)(b.b,{path:"/",children:Object(a.jsx)(it,{})})]),Object(a.jsxs)(r.a.Fragment,{children:[Object(a.jsx)(m.a,{children:Object(a.jsx)("title",{children:"SIPEMA"})}),Object(a.jsx)(b.d,{children:j})]})}n(169);var ja=n(274),ua=n(99),ba=new ja.a;Ce.a.locale("id");var da=Object(s.a)({palette:{background:{default:"#ffffff"}}});var ha=function(){return Object(a.jsx)(r.a.Fragment,{children:Object(a.jsx)(ua.a,{client:ba,children:Object(a.jsxs)(o.a,{theme:da,children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(u.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{path:"/login",children:Object(a.jsx)(D,{})}),Object(a.jsx)(b.b,{path:"/register/token/:token",children:Object(a.jsx)(K,{})}),Object(a.jsx)(b.b,{path:"/register",children:Object(a.jsx)(F,{})}),Object(a.jsx)(b.b,{path:"/password/reset/token/:token",children:Object(a.jsx)(V,{})}),Object(a.jsx)(b.b,{path:"/password/reset",children:Object(a.jsx)(H,{})}),Object(a.jsx)(b.b,{path:"/",children:Object(a.jsx)(oa,{})}),Object(a.jsx)(b.b,{path:"*",children:Object(a.jsx)(_,{})})]})})]})})})},Oa=n(73),xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOG_IN":return t.payload;case"LOG_OUT":return null;default:return e}},pa={showSidebar:!1,showProfileFetchProgress:!1},ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case kt:return Object(_t.a)(Object(_t.a)({},e),{},{showSidebar:!e.showSidebar});case wt:default:return e}},fa=Object(Oa.b)({loginUser:xa,student:ma}),ga=Object(Oa.c)(fa,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(Y.a,{store:ga,children:Object(a.jsx)(ha,{})})}),document.getElementById("root"))}},[[170,1,2]]]);